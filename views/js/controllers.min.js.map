{"version":3,"file":"routes.js","sources":["routes.js","creator/templates/testpart!tpl","creator/templates/section!tpl","creator/templates/rubricblock!tpl","creator/templates/itemref!tpl","creator/templates/item!tpl","tpl!taoQtiTest/controller/creator/templates/test-props","tpl!taoQtiTest/controller/creator/templates/testpart-props","tpl!taoQtiTest/controller/creator/templates/section-props","tpl!taoQtiTest/controller/creator/templates/itemref-props","tpl!taoQtiTest/controller/creator/templates/rubricblock-props","creator/templates/index.js","creator/views/item.js","creator/views/property.js","creator/views/actions.js","creator/views/itemref.js","../../taoQtiItem/qtiItem/core/qtiClasses.js","../../taoQtiItem/qtiCreator/model/qtiClasses.js","../../taoQtiItem/qtiItem/helper/util.js","../../taoQtiItem/qtiItem/helper/rendererConfig.js","../../taoQtiItem/qtiItem/core/Element.js","../../taoQtiItem/qtiItem/helper/interactionHelper.js","../../taoQtiItem/qtiRunner/core/Renderer.js","../../taoQtiItem/qtiDefaultRenderer/renderers/config.js","../../taoQtiItem/qtiCommonRenderer/renderers/config.js","../../taoQtiItem/qtiCreator/renderers/config.js","../../taoQtiItem/qtiCreator/renderers/Renderer.js","../../taoQtiItem/qtiCreator/helper/creatorRenderer.js","../../taoQtiItem/qtiXmlRenderer/renderers/config.js","../../taoQtiItem/qtiXmlRenderer/renderers/Renderer.js","../../taoQtiItem/qtiItem/core/Loader.js","../../taoQtiItem/qtiCreator/helper/simpleParser.js","creator/views/rubricblock.js","creator/helpers/qtiTest.js","creator/views/section.js","creator/views/testpart.js","creator/views/test.js","creator/encoders/dom2qti.js","creator/creator.js","../../serviceApi/ServiceApi.js","../../serviceApi/UserInfoService.js","../../serviceApi/StateStorage.js","../../lib/jquery.badonkatrunc.js","runtime/testRunner.js"],"names":["define","Creator","css","actions","index","hb","template","Handlebars","depth0","helpers","partials","data","this","compilerInfo","merge","stack1","helper","buffer","functionType","escapeExpression","identifier","call","hash","options","helperMissing","title","__","href","label","program1","uri","parent","inverse","self","noop","fn","program","program2","each","testPart","section","rubricBlock","itemRef","item","testProps","testPartProps","sectionProps","itemRefProps","rubricBlockProps","testpart","itemref","rubricblock","properties","test","$","templates","itemTemplate","itemView","loadItems","setUpLiveSearch","timeout","liveSearch","pattern","$search","val","length","clearTimeout","setTimeout","items","update","keyup","siblings","click","disableSelection","$itemBox","empty","append","enableSelection","$panel","selectable","filter","selected","event","ui","addClass","unselected","removeClass","stop","trigger","undefined","DataBinder","propView","tmplName","model","propValidation","$view","on","e","isValid","namespace","$togglers","groupValidator","$container","open","databinder","children","hide","appendTo","startDomComponent","bind","getView","isOpen","onOpen","cb","stopPropagation","onClose","destroy","remove","toggle","not","show","propertyView","find","preventDefault","$elt","hasClass","disabledClass","blur","activeClass","btnOnClass","move","$actionContainer","containerClass","elementClass","$element","parents","$elements","is","console","log","fadeOut","insertBefore","fadeIn","insertAfter","movable","actionContainerElt","$moveUp","$moveDown","removable","$delete","disable","enable","_","setUp","$itemRef","propHandler","removePropHandler","categoriesProperty","$select","select2","width","tags","multiple","tokenSeparators","formatNoMatches","maximumInputLength","resize","listenActionState","document","$parent","$target","target","throttle","$refs","first","$actions","innerWidth","outerWidth","_container","assessmentItem","responseProcessing","_simpleFeedbackRule","stylesheet","math","img","object","outcomeDeclaration","responseDeclaration","associableHotspot","gap","gapImg","gapText","hotspotChoice","hottext","inlineChoice","simpleAssociableChoice","simpleChoice","associateInteraction","choiceInteraction","endAttemptInteraction","extendedTextInteraction","gapMatchInteraction","graphicAssociateInteraction","graphicGapMatchInteraction","graphicOrderInteraction","hotspotInteraction","hottextInteraction","inlineChoiceInteraction","matchInteraction","mediaInteraction","orderInteraction","prompt","selectPointInteraction","sliderInteraction","textEntryInteraction","uploadInteraction","feedbackBlock","feedbackInline","modalFeedback","customInteraction","infoControl","qtiClasses","defaults","graphicInteraction","util","buildSerial","prefix","id","chars","i","charAt","Math","floor","random","fullpath","src","baseUrl","replace","match","findInCollection","element","collectionNames","searchedSerial","found","isString","isArray","Error","collectionName","collection","split","nameToken","elt","isFunction","addMarkupNamespace","markup","ns","removeMarkupNamespaces","getMarkupUsedNamespaces","namespaces","original","slash","node","push","uniq","rendererConfigHelper","getOptionsFromArguments","args","placeholder","subclass","renderer","arg","isRenderer","isPlainObject","Class","rendererConfig","_instances","Element","extend","qtiClass","serial","relatedItem","init","attributes","metaData","setAttributes","initContainer","arguments","initObject","getSerial","getUsedIdentifiers","usedIds","elts","getComposingElements","attr","name","value","prop","key","removeData","removeAttr","removeAttributes","getAttributes","clone","attrNames","container","getBody","getObject","v","isA","getUsedClasses","ret","composingElts","location","getRelatedItem","setRelatedItem","recursive","setRenderer","getRenderer","render","tplData","defaultData","tag","body","getAbsoluteUrl","getData","rendering","renderTpl","replaceWith","postRender","altClassName","getContainer","$scope","toArray","arr","type","isEmpty","className","clazz","_containClass","regex","RegExp","isset","issetElement","unset","unsetElement","allClassStr","qtiElement","getElementBySerial","composingElements","convertChoices","choices","outputType","_this","c","findChoices","interaction","inputType","choice","getChoice","getChoiceByIdentifier","shuffleChoices","r","f","j","n","k","tmp","serialToIdentifier","choiceSerial","interactionHelper","getDocumentBaseUrl","window","protocol","host","pathname","_isValidRenderer","valid","classCorrect","indexOf","_renderableClasses","pos","slice","subClass","_renderableSubclasses","_dependencies","Renderer","shuffledChoices","_locations","_renderers","_getClassRenderer","setOption","setOptions","opts","getOption","qtiSubclass","tplFound","renderDirect","tpl","compile","setResponse","qtiInteraction","response","getResponse","resetResponse","getLoadedRenderers","register","renderersLocations","load","callback","requiredClasses","required","intersection","reqClass","deps","union","requiredSubClasses","values","require","setShuffledChoices","identificationType","getShuffledChoices","reshuffle","returnedType","getChoices","getRenderers","getLocations","relUrl","absUrl","runtimeLocations","size","forIn","runtimeLocation","typeIdentifier","build","defaultOptions","NewRenderer","apply","prototype","locations","defaultRenderConfig","simpleChoice.choiceInteraction","simpleChoice.orderInteraction","simpleAssociableChoice.matchInteraction","simpleAssociableChoice.associateInteraction","commonRenderConfig","config","dom","_creatorRenderer","get","reset","$bodyEltForm","mediaSources","contains","lang","itemOptionForm","interactionOptionForm","choiceOptionForm","responseOptionForm","bodyElementOptionForm","textOptionForm","modalFeedbackOptionForm","mediaManager","appendContainer","browseUrl","_url","uploadUrl","deleteUrl","downloadUrl","fileExistsUrl","done","userRelativeUrl","loadPortableCustomElementData","portableElement","entryPoint","libraries","Loader","classesLocation","qti","setClassesLocation","getRequiredClasses","loadRequiredClasses","reload","requiredClass","QtiClass","getLoadedClasses","keys","loadItemData","Qti","loadContainer","outcomes","outcome","buildOutcome","addOutcomeDeclaration","feedbacks","feedback","buildElement","addModalFeedback","stylesheets","addStylesheet","responses","buildResponse","addResponseDeclaration","feedbackRules","fbData","buildSimpleFeedbackRule","setResponseProcessing","buildResponseProcessing","setNamespaces","loadElement","loadElements","allElements","elementData","loadElementData","howMatch","defaultValue","correctResponse","correctResponses","mapEntries","mapping","areaMapping","mappingAttributes","feedbackRule","condition","comparedValue","comparedOutcome","feedbackOutcome","feedbackThen","modalFeedbacks","feedbackElse","rp","processingType","xml","bodyObject","bodyData","elements","eltData","setElement","bdy","loadObjectData","loadInteractionData","loadChoiceData","loadMathData","loadPicData","buildInteractionChoices","loadPciData","set","matchSet","addChoice","gapImgs","addGapImg","text","_alt","setMathML","mathML","annotations","pci","pic","_getElementSelector","getQtiClassFromXmlDom","$node","toLowerCase","_qtiClassNames","specified","buildMath","$annotation","encoding","html","parseContainer","_defaultOptions","_parsableElements","$qtiElement","_placeholder","loaded","parser","parse","xmlStr","loader","creatorRenderer","XmlRenderer","simpleParser","$rubricBlock","rbViews","$propContainer","setUpEditor","mathNs","$rubricBlockBinding","$rubricBlockContent","$editorForm","fakeXml","xmlRenderer","lan","path","syncRubricBlockContent","widget","ready","changeState","focus","qtiTestHelper","extractIdentifiers","obj","identifiers","has","concat","flatten","forEach","getIdentifier","qtiType","lockedIdentifiers","suggestion","glue","idFormatValidator","qtiIdPattern","message","validate","idAvailableValidator","filterQtiType","addMissingQtiType","parentType","isObject","isNumber","consolidateModel","testParts","assessmentSections","assessmentSection","ordering","shuffle","rubricBlocks","content","views","itemRefView","rubricBlockView","$section","$selectionSwitcher","$selectionSelect","$selectionWithRep","switchSelection","incrementer","selection","$title","itemRefs","sectionParts","labels","encode","acceptItemRefs","$selected","$items","Array","$placeholder","$placeholders","off","$item","addItemRef","decode","trim","end","qti-type","$refList","itemData","eq","addRubricBlock","adder","templateData","$sections","sectionView","$testPart","$identifier","sections","addSection","sectionIndex","$testParts","testPartView","testView","addTestPart","testPartIndex","navigationMode","submissionMode","added","omit","attrToStr","reduce","acc","Dom2QtiEncoder","modelValue","result","startTag","nodeValue","$nodeValue","nodeType","xmlBase","nodeName","class","transform","childNodes","module","DataBindController","itemrefView","validators","url","search","getJSON","Controller","routes","start","$saver","History","back","partial","binderOptions","filters","isItemRef","isSection","encoders","dom2qti","beforeSave","binder","takeControl","save","success","t","exports","amd","Spinner","o","createElement","appendChild","s","a","join","l","max","u","substring","d","insertRule","cssRules","style","toUpperCase","x","offsetLeft","y","offsetTop","offsetParent","p","h","addRule","lines","coordsize","coordorigin","height","rotation","left","arcsize","corners","radius","top","color","opacity","position","shadow","firstChild","getElementsByTagName","sheet","styleSheet","rotate","direction","speed","trail","fps","zIndex","spin","el","offsetWidth","parseInt","offsetHeight","setAttribute","m","g","parentNode","removeChild","background","boxShadow","transformOrigin","borderRadius","hwaccel","animation","behavior","adj","UrlParser","ServiceApi","parameters","serviceCallId","stateStorage","userService","connected","state","onFinishCallback","onKillCallback","onDisplayChangeCallback","SIG_SUCCESS","SIG_ERROR","loadInto","frame","$frame","callUrl","getCallUrl","isCORSAllowed","checkCORS","connect","contentWindow","__knownParent__","onServiceApiReady","params","param","getUserPropertyValues","property","getServiceCallId","getState","setState","getParameter","onFinish","onKill","kill","finish","valueArray","UserInfoService","requestUrl","hasOwnProperty","ajax","dataType","service","StateStorage","submitUrl","methods","all","instanceOptions","badonkatrunc","fitDirection","error","truncateLocation","minimumFontSize","maximumFontSize","minimumLetterSpacing","maximumLetterSpacing","$this","instance","pluginInstance","automaticSizeTracking","resizeMonitor","add","dirtyMonitor","unbind","refresh","changeContents","newContents","contentHtml","method","settings","sizeTrackingTimeout","fontSizeSynced","letterSpacingSynced","truncate","truncateString","truncateOnlyWholeWords","extraOptimizeLimit","btrunc","$targetGroup","createRenderState","fontSize","letterSpacing","view","createHtmlTextView","renderFunc","renderState","overflowFunc","getCurrentOverflow","optimize","truncationLevel","getTruncatedHtml","currentOptimalState","currentRenderedState","syncFonts","lowestFontSize","lowestLetterSpacing","groupInstance","acceptFontSync","settingsWrapper","browser","mozilla","opera","msie","version","forceAllowWrap","whiteSpace","wrapper","overflow","scrollWidth","createDispatcher","updateFunc","addFunc","removeFunc","updateTimeout","dispatcherInstance","_updateLoop","inArray","splice","elementSizeCache","newWidth","newHeight","hasChanged","changed","htmlTextView","amount","wordRounded","getTruncatedRange","begin","words","totalEntities","entityBegin","entityLength","getCharacterPosition","wordIndex","characterCount","endWord","getHtmlSubstring","amountPerSide","right","truncated","$content","totalProcessedLength","totalOutputLength","nodesWithinRange","withinRange","stripOutOfRangeTextInElement","dataLength","newData","wasWithinRange","substr","childCount","parentNodesToKeep","markParentNodesToKeep","keepNode","nodesWithinRangeCount","removeUnusedNodes","nodesToRemove","childNodeCount","childNode","min","actionFunc","currentMax","currentMin","currentValue","lastResult","mostOptimalResult","mostOptimalValue","sameResultCount","moreOptimal","difference","iframeResizer","iframeNotifier","MathJax","timerIds","currentTimes","lastDates","timeDiffs","waitingTime","TestRunner","TEST_STATE_INITIAL","TEST_STATE_INTERACTING","TEST_STATE_MODAL_FEEDBACK","TEST_STATE_SUSPENDED","TEST_STATE_CLOSED","TEST_NAVIGATION_LINEAR","TEST_NAVIGATION_NONLINEAR","TEST_ITEM_STATE_INTERACTING","beforeTransition","disableGui","afterTransition","enableGui","moveForward","that","itemServiceApi","actionCall","moveBackward","skip","assessmentTestContext","isTimeout","updateTimer","comment","closeComment","emptyComment","storeComment","commentUrl","cache","async","$runner","eval","itemServiceApiCall","updateContext","updateProgress","updateNavigation","updateInformation","updateRubrics","updateTools","$itemFrame","autoHeight","navigator","userAgent","itemSessionState","adjustFrame","prependTo","itemIdentifier","allowComment","allowSkipping","isLast","timeConstraints","cst","allowLateSubmission","source","formatTime","seconds","Date","timerIndex","superClosure","setInterval","getTime","round","clearInterval","rubrics","$rubrics","Hub","Queue","canMoveBackward","considerProgress","ratio","progressbar","testTitle","sectionTitle","testPartId","actionsHeight","outerHeight","windowHeight","innerHeight","navigationHeight","newContentHeight","totalSeconds","sec_num","hours","minutes","time","action","serviceApi","ajaxError","jqxhr","status"],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoQtiTest/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Creator': {\n            'css': 'creator', \n            'actions': {\n                'index' : 'controller/creator/creator'\n            }\n        }\n    };\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/testpart', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"testpart clearfix\\\">\\n\\n   <h1><span data-bind=\\\"identifier\\\">\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n        <div class=\\\"actions\\\"> \\n            <div class=\\\"tlb\\\">\\n                <div class=\\\"tlb-top\\\">\\n                    <span class=\\\"tlb-box\\\">\\n                        <span class=\\\"tlb-bar\\\">\\n                            <span class=\\\"tlb-start\\\"></span>\\n                            <span class=\\\"tlb-group\\\">\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off property-toggler\\\" title=\\\"Test Part Properties\\\"><span class=\\\"icon-settings\\\"></span></a>\\n                                <span class=\\\"tlb-separator\\\"></span>\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off move-up\\\" title=\\\"Move Up\\\"><span class=\\\"icon-up\\\"></span></a>\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off move-down\\\" title=\\\"Move Down\\\"><span class=\\\"icon-down\\\"></span></a>\\n                                <span class=\\\"tlb-separator\\\"></span> \\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off\\\" title=\\\"Remove Test Part\\\" data-delete=\\\"#\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"><span class=\\\"icon-bin\\\"></span></a>\\n                            </span>\\n                            <span class=\\\"tlb-end\\\"></span>\\n                        </span>  \\n                        <!--<span class=\\\"tlb-bar\\\">-->\\n                            <!--<span class=\\\"tlb-start\\\"></span>-->\\n                            <!--<span class=\\\"tlb-text-button-box\\\">-->\\n                                <!--<a class=\\\"tlb-text-button-off section-adder\\\">-->\\n                                    <!--<span class=\\\"icon-add\\\"></span>-->\\n                                    <!--<span class=\\\"tlb-text\\\">New Section</span>-->\\n                                <!--</a>-->\\n                            <!--</span>-->\\n                            <!--<span class=\\\"tlb-end\\\"></span>-->\\n                        <!--</span>-->\\n                    </span>   \\n                </div>\\n            </div>\\n        </div>\\n        <a href=\\\"#\\\" class=\\\"toggler opened\\\" data-toggle=\\\"#testpart-content-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></a>\\n    </h1>\\n    <div id=\\\"testpart-content-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"testpart-content\\\">\\n        \\n       <!-- assessmentTest/testPart/assessmentSections -->\\n       <div class=\\\"sections\\\" data-bind-each=\\\"assessmentSections\\\" data-bind-tmpl=\\\"section\\\" data-bind-filter=\\\"isSection\\\"></div>\\n\\n        <button class=\\\"btn-info small section-adder\\\">\\n            <span class=\\\"icon-add\\\"></span>New section\\n        </button>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/section', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div id=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"section\\\">\\n\\n<!-- assessmentTest/testPart/assessmentSection/title -->\\n    <h2><span data-bind=\\\"title\\\">\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n        <div class=\\\"actions\\\">  \\n            <div class=\\\"tlb\\\">\\n                <div class=\\\"tlb-top\\\">\\n                    <span class=\\\"tlb-box\\\">\\n                        <span class=\\\"tlb-bar\\\">\\n                            <span class=\\\"tlb-start\\\"></span>\\n                            <span class=\\\"tlb-group\\\">\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off rub-toggler\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Manage Rubric Blocks\", options) : helperMissing.call(depth0, \"__\", \"Manage Rubric Blocks\", options)))\n    + \"\\\" data-toggle=\\\"#rublocks-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" ><span class=\\\"icon-rubric\\\"></span></a>\\n                                <span class=\\\"tlb-separator\\\"></span>\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off property-toggler\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Section Properties\", options) : helperMissing.call(depth0, \"__\", \"Section Properties\", options)))\n    + \"\\\"><span class=\\\"icon-settings\\\"></span></a>\\n                                <span class=\\\"tlb-separator\\\"></span>\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off move-up disabled\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Move Up\", options) : helperMissing.call(depth0, \"__\", \"Move Up\", options)))\n    + \"\\\"><span class=\\\"icon-up\\\"></span></a>\\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off move-down disabled\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Move Down\", options) : helperMissing.call(depth0, \"__\", \"Move Down\", options)))\n    + \"\\\"><span class=\\\"icon-down\\\"></span></a>\\n                                <span class=\\\"tlb-separator\\\"></span> \\n                                <a href=\\\"#\\\" class=\\\"tlb-button-off disabled\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Section\", options) : helperMissing.call(depth0, \"__\", \"Remove Section\", options)))\n    + \"\\\" data-delete=\\\":parent .section\\\"><span class=\\\"icon-bin\\\"></span></a>\\n                            </span>\\n                            <span class=\\\"tlb-end\\\"></span>\\n                        </span>  \\n                    </span>   \\n                </div>\\n            </div>\\n        </div>\\n    </h2>\\n\\n    <div id=\\\"rublocks-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"rublocks clearfix toggled\\\">\\n        <h3>\\n            <span class=\\\"title\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Rubric Blocks\", options) : helperMissing.call(depth0, \"__\", \"Rubric Blocks\", options)))\n    + \"</span>\\n        </h3>\\n        <ol class=\\\"rubricblocks decimal\\\" data-bind-each=\\\"rubricBlocks\\\" data-bind-tmpl=\\\"rubricblock\\\"></ol>\\n        <button class=\\\"btn-info small rublock-adder\\\">\\n            <span class=\\\"icon-add\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"New Rubric Block\", options) : helperMissing.call(depth0, \"__\", \"New Rubric Block\", options)))\n    + \"\\n        </button>\\n    </div>\\n    <div class=\\\"itemrefs-wrapper\\\">\\n        <ol class=\\\"itemrefs decimal clearfix\\\" data-bind-each=\\\"sectionParts\\\" data-bind-tmpl=\\\"itemref\\\" data-bind-filter=\\\"isItemRef\\\" data-msg=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add selected item(s) here.\", options) : helperMissing.call(depth0, \"__\", \"Add selected item(s) here.\", options)))\n    + \"\\\"></ol>\\n        <div class=\\\"itemref-placeholder\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add selected item(s) here.\", options) : helperMissing.call(depth0, \"__\", \"Add selected item(s) here.\", options)))\n    + \"\\n        </div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/rubricblock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<li class=\\\"rubricblock\\\">\\n    <div class=\\\"actions\\\"> \\n       <div class=\\\"tlb\\\">\\n            <div class=\\\"tlb-top\\\">\\n                <span class=\\\"tlb-box\\\">\\n                    <span class=\\\"tlb-bar\\\">\\n                        <span class=\\\"tlb-start\\\"></span>\\n                        <span class=\\\"tlb-group\\\">\\n                            <!--<a href=\\\"#\\\" class=\\\"tlb-button-off property-toggler\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Rubric Block Properties\", options) : helperMissing.call(depth0, \"__\", \"Rubric Block Properties\", options)))\n    + \"\\\"><span class=\\\"icon-settings\\\"></span></a>-->\\n                            <!--<span class=\\\"tlb-separator\\\"></span> -->\\n                            <a href=\\\"#\\\" class=\\\"tlb-button-off\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Rubric Block\", options) : helperMissing.call(depth0, \"__\", \"Remove Rubric Block\", options)))\n    + \"\\\" data-delete=\\\":parent .rubricblock\\\"><span class=\\\"icon-bin\\\"></span></a>\\n                        </span>\\n                        <span class=\\\"tlb-end\\\"></span>\\n                    </span>  \\n                </span>   \\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"rubricblock-content\\\"></div>\\n    <div class=\\\"rubricblock-binding\\\" data-bind=\\\"content\\\" data-bind-html=\\\"true\\\" data-bind-encoder=\\\"dom2qti\\\"></div>\\n</li>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/itemref', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<li id='\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' data-uri='\";\n  if (helper = helpers.href) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.href); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class='itemref'>\\n    <span class='title truncate'>\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <div class=\\\"actions\\\"> \\n        <div class=\\\"tlb\\\">\\n            <div class=\\\"tlb-top\\\">\\n                <span class=\\\"tlb-box\\\">\\n                    <span class=\\\"tlb-bar\\\">\\n                        <span class=\\\"tlb-start\\\"></span>\\n                        <span class=\\\"tlb-group\\\">\\n                            <a href=\\\"#\\\" class=\\\"tlb-button-off property-toggler\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Item Reference Properties\", options) : helperMissing.call(depth0, \"__\", \"Item Reference Properties\", options)))\n    + \"\\\"><span class=\\\"icon-settings\\\"></span></a>\\n                            <span class=\\\"tlb-separator\\\"></span>\\n                            <a href=\\\"#\\\" class=\\\"tlb-button-off move-up\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Move Up\", options) : helperMissing.call(depth0, \"__\", \"Move Up\", options)))\n    + \"\\\"><span class=\\\"icon-up\\\"></span></a>\\n                            <a href=\\\"#\\\" class=\\\"tlb-button-off move-down\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Move Down\", options) : helperMissing.call(depth0, \"__\", \"Move Down\", options)))\n    + \"\\\"><span class=\\\"icon-down\\\"></span></a>\\n                            <span class=\\\"tlb-separator\\\"></span> \\n                            <a href=\\\"#\\\" class=\\\"tlb-button-off\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Item Reference\", options) : helperMissing.call(depth0, \"__\", \"Remove Item Reference\", options)))\n    + \"\\\" data-delete=\\\":parent .itemref\\\"><span class=\\\"icon-bin\\\"></span></a>\\n                        </span>\\n                        <span class=\\\"tlb-end\\\"></span>\\n                    </span>  \\n                </span>   \\n            </div>\\n        </div>\\n    </div>\\n</li>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n     <li data-uri='\";\n  if (helper = helpers.uri) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.uri); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class='truncate'>\\n        \";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.parent), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n     </li>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class='flag truncate' title=\\\"\";\n  if (helper = helpers.parent) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.parent); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.parent) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.parent); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\n  stack1 = helpers.each.call(depth0, depth0, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/test-props', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"test-props props clearfix\\\">\\n    \\n    <!-- test properties --> \\n    <h3 data-bind=\\\"title\\\"></h3>\\n\\n<!-- assessmentTest/identifier -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"test-identifier\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"test-identifier\\\" data-bind=\\\"identifier\\\" data-validate=\\\"$notEmpty; $testIdFormat; $testIdAvailable(original=\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The principle identifier of the test.\", options) : helperMissing.call(depth0, \"__\", \"The principle identifier of the test.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n<!-- assessmentTest/title -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"test-title\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Title\", options) : helperMissing.call(depth0, \"__\", \"Title\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"test-title\\\" data-bind=\\\"title\\\" data-validate=\\\"$notEmpty\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The test title.\", options) : helperMissing.call(depth0, \"__\", \"The test title.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .test-time-limits\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Time Limits\", options) : helperMissing.call(depth0, \"__\", \"Time Limits\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/timeLimits -->\\n    <div class=\\\"test-time-limits toggled\\\">\\n\\n\\n\\n<!-- assessmentTest/timeLimits/maxTime -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"test-max-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum Duration\", options) : helperMissing.call(depth0, \"__\", \"Maximum Duration\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input type=\\\"text\\\" name=\\\"max-time\\\" value=\\\"00:00:00\\\" data-duration=\\\"HH:mm:ss\\\" data-bind=\\\"timeLimits.maxTime\\\" data-bind-encoder=\\\"time\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum duration for the all test.\", options) : helperMissing.call(depth0, \"__\", \"Maximum duration for the all test.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/timeLimits/allowLateSubmission -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Late submission allowed\", options) : helperMissing.call(depth0, \"__\", \"Late submission allowed\", options)))\n    + \"\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"test-allow-late-submission\\\" value=\\\"true\\\" data-bind=\\\"timeLimits.allowLateSubmission\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Whether a candidate's response that is beyond the maximum duration should still be accepted.\", options) : helperMissing.call(depth0, \"__\", \"Whether a candidate's response that is beyond the maximum duration should still be accepted.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/testpart-props', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div id=\\\"testpart-props-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"testpart-props props clearfix\\\">\\n    <h3>\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n    \\n    <form autocomplete=\\\"off\\\">\\n\\n<!-- assessmentTest/testPart/identifier -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"testpart-identifier\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input type=\\\"text\\\" name=\\\"testpart-identifier\\\" data-bind=\\\"identifier\\\" data-validate=\\\"$notEmpty; $testIdFormat; $testIdAvailable(original=\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The test part identifier.\", options) : helperMissing.call(depth0, \"__\", \"The test part identifier.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/navigationMode -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n               \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Navigation\", options) : helperMissing.call(depth0, \"__\", \"Navigation\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"testpart-navigation-mode\\\" value=\\\"0\\\" checked=\\\"checked\\\" data-bind=\\\"navigationMode\\\" data-bind-encoder=\\\"number\\\" />\\n                    <span class=\\\"icon-radio\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Linear\", options) : helperMissing.call(depth0, \"__\", \"Linear\", options)))\n    + \"\\n                </label>\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"testpart-navigation-mode\\\" value=\\\"1\\\"  />\\n                    <span class=\\\"icon-radio\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Non Linear\", options) : helperMissing.call(depth0, \"__\", \"Non Linear\", options)))\n    + \"\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.\", options) : helperMissing.call(depth0, \"__\", \"The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/submissionMode -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Submission\", options) : helperMissing.call(depth0, \"__\", \"Submission\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"testpart-submission-mode\\\" value=\\\"0\\\" checked=\\\"checked\\\" data-bind=\\\"submissionMode\\\" data-bind-encoder=\\\"number\\\" />\\n                    <span class=\\\"icon-radio\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Individual\", options) : helperMissing.call(depth0, \"__\", \"Individual\", options)))\n    + \"\\n                </label>\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"testpart-submission-mode\\\" value=\\\"1\\\"  />\\n                    <span class=\\\"icon-radio\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Simultaneous\", options) : helperMissing.call(depth0, \"__\", \"Simultaneous\", options)))\n    + \"\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.\", options) : helperMissing.call(depth0, \"__\", \"The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n        <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .testpart-item-session-control\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Item Session Control\", options) : helperMissing.call(depth0, \"__\", \"Item Session Control\", options)))\n    + \"</h4>\\n\\n\\n<!-- assessmentTest/testPart/itemSessionControl -->\\n        <div class=\\\"testpart-item-session-control toggled\\\">\\n\\n<!-- assessmentTest/testPart/itemSessionControl/maxAttempts -->\\n            <div class=\\\"grid-row\\\">\\n                <div class=\\\"col-5\\\">\\n                    <label for=\\\"testpart-max-attempts\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max Attempts\", options) : helperMissing.call(depth0, \"__\", \"Max Attempts\", options)))\n    + \"</label>\\n                </div>\\n                <div class=\\\"col-6\\\">\\n                    <input name=\\\"testpart-max-attempts\\\" type=\\\"text\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" value=\\\"1\\\" data-bind=\\\"itemSessionControl.maxAttempts\\\" data-bind-encoder=\\\"number\\\" />\\n                </div>\\n                <div class=\\\"col-1 help\\\">\\n                    <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                    <div class=\\\"tooltip-content\\\">\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Controls the maximum number of attempts allowed. 0 means unlimited.\", options) : helperMissing.call(depth0, \"__\", \"Controls the maximum number of attempts allowed. 0 means unlimited.\", options)))\n    + \"\\n                    </div>\\n                </div>\\n            </div>\\n\\n<!-- assessmentTest/testPart/itemSessionControl/showFeedback -->\\n            <div class=\\\"grid-row pseudo-label-box\\\">\\n                <div class=\\\"col-5\\\">\\n                    <label for=\\\"testpart-show-feedback\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Show Feedback\", options) : helperMissing.call(depth0, \"__\", \"Show Feedback\", options)))\n    + \"</label>\\n                </div>\\n                <div class=\\\"col-6\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" name=\\\"testpart-show-feedback\\\" value=\\\"true\\\" data-bind=\\\"itemSessionControl.showFeedback\\\" data-bind-encoder=\\\"boolean\\\" />\\n                        <span class=\\\"icon-checkbox\\\" />\\n                    </label>\\n                </div>\\n                <div class=\\\"col-1 help\\\">\\n                    <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                    <div class=\\\"tooltip-content\\\">\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This constraint affects the visibility of feedback after the end of the last attempt.\", options) : helperMissing.call(depth0, \"__\", \"This constraint affects the visibility of feedback after the end of the last attempt.\", options)))\n    + \"\\n                    </div>\\n                </div>\\n            </div>\\n\\n\\n\\n\\n\\n<!-- assessmentTest/testPart/itemSessionControl/allowComment -->\\n            <div class=\\\"grid-row pseudo-label-box\\\">\\n                <div class=\\\"col-5\\\">\\n                    <label for=\\\"testpart-allow-comment\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allow Comment\", options) : helperMissing.call(depth0, \"__\", \"Allow Comment\", options)))\n    + \"</label>\\n                </div>\\n                <div class=\\\"col-6\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" name=\\\"testpart-allow-comment\\\" value=\\\"true\\\" data-bind=\\\"itemSessionControl.allowComment\\\" data-bind-encoder=\\\"boolean\\\" />\\n                        <span class=\\\"icon-checkbox\\\" />\\n                    </label>\\n                </div>\\n                <div class=\\\"col-1 help\\\">\\n                    <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                    <div class=\\\"tooltip-content\\\">\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.\", options) : helperMissing.call(depth0, \"__\", \"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.\", options)))\n    + \"\\n                    </div>\\n                </div>\\n            </div>\\n\\n<!-- assessmentTest/testPart/itemSessionControl/allowSkipping -->\\n            <div class=\\\"grid-row pseudo-label-box\\\">\\n                <div class=\\\"col-5\\\">\\n                    <label for=\\\"testpart-allow-skipping\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allow Skipping\", options) : helperMissing.call(depth0, \"__\", \"Allow Skipping\", options)))\n    + \"</label>\\n                </div>\\n                <div class=\\\"col-6\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" name=\\\"testpart-allow-skipping\\\" value=\\\"true\\\" checked=\\\"checked\\\"  data-bind=\\\"itemSessionControl.allowSkipping\\\" data-bind-encoder=\\\"boolean\\\"   />\\n                        <span class=\\\"icon-checkbox\\\" />\\n                    </label>\\n                </div>\\n                <div class=\\\"col-1 help\\\">\\n                    <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                    <div class=\\\"tooltip-content\\\">\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the candidate can skip the item, without submitting a response.\", options) : helperMissing.call(depth0, \"__\", \"If the candidate can skip the item, without submitting a response.\", options)))\n    + \"\\n                    </div>\\n                </div>\\n            </div>\\n\\n\\n        </div>\\n\\n        <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .testpart-time-limits\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Time Limits\", options) : helperMissing.call(depth0, \"__\", \"Time Limits\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/testPart/timeLimits/minTime -->\\n        <div class=\\\"testpart-time-limits toggled\\\">\\n\\n\\n\\n<!-- assessmentTest/testPart/timeLimits/maxTime -->\\n            <div class=\\\"grid-row\\\">\\n                <div class=\\\"col-5\\\">\\n                    <label for=\\\"testpart-max-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum Duration\", options) : helperMissing.call(depth0, \"__\", \"Maximum Duration\", options)))\n    + \"</label>\\n                </div>\\n                <div class=\\\"col-6\\\">\\n                    <input type=\\\"text\\\" name=\\\"max-time\\\" value=\\\"00:00:00\\\" data-duration=\\\"HH:mm:ss\\\" data-bind=\\\"timeLimits.maxTime\\\" data-bind-encoder=\\\"time\\\" />\\n                </div>\\n                <div class=\\\"col-1 help\\\">\\n                    <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                    <div class=\\\"tooltip-content\\\">\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum duration for this test part.\", options) : helperMissing.call(depth0, \"__\", \"Maximum duration for this test part.\", options)))\n    + \"\\n                    </div>\\n                </div>\\n            </div>\\n\\n<!-- assessmentTest/testPart/timeLimits/allowLateSubmission -->\\n            <div class=\\\"grid-row pseudo-label-box\\\">\\n                <div class=\\\"col-5\\\">\\n                    <label for=\\\"testpart-allow-late-submission\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Late submission allowed\", options) : helperMissing.call(depth0, \"__\", \"Late submission allowed\", options)))\n    + \"</label>\\n                </div>\\n                <div class=\\\"col-6\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" name=\\\"section-allow-late-submission\\\" value=\\\"true\\\" data-bind=\\\"timeLimits.allowLateSubmission\\\" data-bind-encoder=\\\"boolean\\\" />\\n                        <span class=\\\"icon-checkbox\\\" />\\n                    </label>\\n                </div>\\n                <div class=\\\"col-1 help\\\">\\n                    <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                    <div class=\\\"tooltip-content\\\">\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.\", options) : helperMissing.call(depth0, \"__\", \"Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.\", options)))\n    + \"\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/section-props', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div id=\\\"section-props-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"section-props props clearfix\\\">\\n    <h3>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n\\n<!-- assessmentTest/testPart/assessmentSection/identifier -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"section-identifier\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"section-identifier\\\" data-bind=\\\"identifier\\\" data-validate=\\\"$notEmpty; $testIdFormat; $testIdAvailable(original=\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the section.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the section.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/title -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"section-title\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Title\", options) : helperMissing.call(depth0, \"__\", \"Title\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"section-title\\\" data-bind=\\\"title\\\" data-validate=\\\"$notEmpty\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The section title.\", options) : helperMissing.call(depth0, \"__\", \"The section title.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n\\n\\n\\n\\n<!-- assessmentTest/testPart/assessmentSection/visible -->\\n    <div class=\\\"grid-row pseudo-label-box\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"section-visible\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Visible\", options) : helperMissing.call(depth0, \"__\", \"Visible\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <label>\\n                <input type=\\\"checkbox\\\" name=\\\"section-visible\\\" value=\\\"true\\\" checked=\\\"checked\\\"  data-bind=\\\"visible\\\" data-bind-encoder=\\\"boolean\\\" />\\n                <span class=\\\"icon-checkbox\\\"></span>\\n            </label>\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"A visible section is one that is identifiable by the candidate.\", options) : helperMissing.call(depth0, \"__\", \"A visible section is one that is identifiable by the candidate.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/keepTogether -->\\n    <div class=\\\"grid-row pseudo-label-box\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"section-keep-together\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Keep Together\", options) : helperMissing.call(depth0, \"__\", \"Keep Together\", options)))\n    + \"</label>\\n        </div>\\n\\n        <div class=\\\"col-6\\\">\\n            <label>\\n                <input type=\\\"checkbox\\\" name=\\\"section-keep-together\\\" value=\\\"true\\\" checked=\\\"checked\\\"  data-bind=\\\"keepTogether\\\" data-bind-encoder=\\\"boolean\\\" />\\n                <span class=\\\"icon-checkbox\\\"></span>\\n            </label>\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.\", options) : helperMissing.call(depth0, \"__\", \"An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .section-selection\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Selection\", options) : helperMissing.call(depth0, \"__\", \"Selection\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/testPart/assessmentSection/selection -->\\n    <div class=\\\"section-selection toggled\\\">\\n\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-enable-selection\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Enable selection\", options) : helperMissing.call(depth0, \"__\", \"Enable selection\", options)))\n    + \"</label>\\n            </div>\\n\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-enable-selection\\\"  />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/selection/select -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-select\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select\", options) : helperMissing.call(depth0, \"__\", \"Select\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input name=\\\"section-select\\\" type=\\\"text\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" value=\\\"0\\\" data-bind=\\\"selection.select\\\"  data-bind-encoder=\\\"number\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The number of child elements to be selected.\", options) : helperMissing.call(depth0, \"__\", \"The number of child elements to be selected.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/selection/withReplacement -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-with-replacement\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"With Replacement\", options) : helperMissing.call(depth0, \"__\", \"With Replacement\", options)))\n    + \"</label>\\n            </div>\\n\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-with-replacement\\\" value=\\\"true\\\" data-bind=\\\"selection.withReplacement\\\"  data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"When selecting child elements each element is normally eligible for selection once only.\", options) : helperMissing.call(depth0, \"__\", \"When selecting child elements each element is normally eligible for selection once only.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .section-ordering\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Ordering\", options) : helperMissing.call(depth0, \"__\", \"Ordering\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/testPart/assessmentSection/ordering -->\\n    <div class=\\\"section-ordering toggled\\\">\\n<!-- assessmentTest/testPart/assessmentSection/ordering/shuffle -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-shuffle\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle\", options) : helperMissing.call(depth0, \"__\", \"Shuffle\", options)))\n    + \"</label>\\n            </div>\\n\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-shuffle\\\" value=\\\"true\\\" data-bind=\\\"ordering.shuffle\\\"  data-bind-encoder=\\\"boolean\\\"  />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.\", options) : helperMissing.call(depth0, \"__\", \"If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .section-item-session-control\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Item Session Control\", options) : helperMissing.call(depth0, \"__\", \"Item Session Control\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl -->\\n    <div class=\\\"section-item-session-control toggled\\\">\\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/maxAttempts -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-max-attempts\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max Attempts\", options) : helperMissing.call(depth0, \"__\", \"Max Attempts\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input name=\\\"section-max-attempts\\\" type=\\\"text\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" value=\\\"1\\\" data-bind=\\\"itemSessionControl.maxAttempts\\\" data-bind-encoder=\\\"number\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Controls the maximum number of attempts allowed. 0 means unlimited.\", options) : helperMissing.call(depth0, \"__\", \"Controls the maximum number of attempts allowed. 0 means unlimited.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/showFeedback -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-show-feedback\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Show Feedback\", options) : helperMissing.call(depth0, \"__\", \"Show Feedback\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-show-feedback\\\" value=\\\"true\\\" data-bind=\\\"itemSessionControl.showFeedback\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This constraint affects the visibility of feedback after the end of the last attempt.\", options) : helperMissing.call(depth0, \"__\", \"This constraint affects the visibility of feedback after the end of the last attempt.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n\\n\\n\\n\\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowComment -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-allow-comment\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allow Comment\", options) : helperMissing.call(depth0, \"__\", \"Allow Comment\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-allow-comment\\\" value=\\\"true\\\"  data-bind=\\\"itemSessionControl.allowComment\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.\", options) : helperMissing.call(depth0, \"__\", \"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowSkipping -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-allow-skipping\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allow Skipping\", options) : helperMissing.call(depth0, \"__\", \"Allow Skipping\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-allow-skipping\\\" value=\\\"true\\\" checked=\\\"checked\\\" data-bind=\\\"itemSessionControl.allowSkipping\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the candidate can skip the item, without submitting a response.\", options) : helperMissing.call(depth0, \"__\", \"If the candidate can skip the item, without submitting a response.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n\\n    </div>\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .section-time-limits\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Time Limits\", options) : helperMissing.call(depth0, \"__\", \"Time Limits\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/timeLimits -->\\n    <div class=\\\"section-time-limits toggled\\\">\\n\\n\\n\\n\\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/maxTime -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-max-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum Duration\", options) : helperMissing.call(depth0, \"__\", \"Maximum Duration\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input type=\\\"text\\\" name=\\\"max-time\\\" value=\\\"00:00:00\\\" data-duration=\\\"HH:mm:ss\\\" data-bind=\\\"timeLimits.maxTime\\\" data-bind-encoder=\\\"time\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum duration for this section.\", options) : helperMissing.call(depth0, \"__\", \"Maximum duration for this section.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/allowLateSubmission -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"section-allow-late-submission\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Late submission allowed\", options) : helperMissing.call(depth0, \"__\", \"Late submission allowed\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"section-allow-late-submission\\\" value=\\\"true\\\" data-bind=\\\"timeLimits.allowLateSubmission\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.\", options) : helperMissing.call(depth0, \"__\", \"Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/itemref-props', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div id=\\\"itemref-props-\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"itemref-props props clearfix\\\">\\n\\n    <h3>\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/identifier -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"itemref-identifier\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"itemref-identifier\\\" data-bind=\\\"identifier\\\" data-validate=\\\"$notEmpty; $testIdFormat; $testIdAvailable(original=\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the item reference.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the item reference.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/href -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"itemref-href\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Reference\", options) : helperMissing.call(depth0, \"__\", \"Reference\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"itemref-href\\\" data-bind=\\\"href\\\" readonly=\\\"readonly\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The reference.\", options) : helperMissing.call(depth0, \"__\", \"The reference.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n    \\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/category -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"itemref-category\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Categories\", options) : helperMissing.call(depth0, \"__\", \"Categories\", options)))\n    + \"</label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <input type=\\\"text\\\" name=\\\"itemref-category\\\" data-bind=\\\"categories\\\" data-bind-encoder=\\\"str2array\\\" />\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Items can optionally be assigned to one or more categories.\", options) : helperMissing.call(depth0, \"__\", \"Items can optionally be assigned to one or more categories.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/required -->\\n    <div class=\\\"grid-row pseudo-label-box\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"itemref-required\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required\", options) : helperMissing.call(depth0, \"__\", \"Required\", options)))\n    + \"</label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <label>\\n                <input type=\\\"checkbox\\\" name=\\\"itemref-required\\\" value=\\\"true\\\" data-bind=\\\"required\\\" data-bind-encoder=\\\"boolean\\\" />\\n                <span class=\\\"icon-checkbox\\\"></span>\\n            </label>\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If required it must appear (at least once) in the selection.\", options) : helperMissing.call(depth0, \"__\", \"If required it must appear (at least once) in the selection.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/fixed -->\\n    <div class=\\\"grid-row pseudo-label-box\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"itemref-fixed\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Fixed\", options) : helperMissing.call(depth0, \"__\", \"Fixed\", options)))\n    + \"</label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <label>\\n                <input type=\\\"checkbox\\\" name=\\\"itemref-fixed\\\" value=\\\"true\\\" data-bind=\\\"fixed\\\" data-bind-encoder=\\\"boolean\\\" />\\n                <span class=\\\"icon-checkbox\\\"></span>\\n            </label>\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Not shuffled, the position remains fixed.\", options) : helperMissing.call(depth0, \"__\", \"Not shuffled, the position remains fixed.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .itemref-item-session-control\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Item Session Control\", options) : helperMissing.call(depth0, \"__\", \"Item Session Control\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl -->\\n    <div class=\\\"itemref-item-session-control toggled\\\">\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/maxAttempts -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"itemref-max-attempts\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max Attempts\", options) : helperMissing.call(depth0, \"__\", \"Max Attempts\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input name=\\\"itemref-max-attempts\\\" type=\\\"text\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" value=\\\"1\\\" data-bind=\\\"itemSessionControl.maxAttempts\\\" data-bind-encoder=\\\"number\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Controls the maximum number of attempts allowed. 0 means unlimited.\", options) : helperMissing.call(depth0, \"__\", \"Controls the maximum number of attempts allowed. 0 means unlimited.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/showFeedback -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"itemref-show-feedback\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Show Feedback\", options) : helperMissing.call(depth0, \"__\", \"Show Feedback\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"itemref-show-feedback\\\" value=\\\"true\\\" data-bind=\\\"itemSessionControl.showFeedback\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This constraint affects the visibility of feedback after the end of the last attempt.\", options) : helperMissing.call(depth0, \"__\", \"This constraint affects the visibility of feedback after the end of the last attempt.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n\\n\\n\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowComment -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"itemref-allow-comment\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allow Comment\", options) : helperMissing.call(depth0, \"__\", \"Allow Comment\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"itemref-allow-comment\\\" value=\\\"true\\\"  data-bind=\\\"itemSessionControl.allowComment\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.\", options) : helperMissing.call(depth0, \"__\", \"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowSkipping -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"itemref-allow-skipping\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allow Skipping\", options) : helperMissing.call(depth0, \"__\", \"Allow Skipping\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"itemref-allow-skipping\\\" value=\\\"true\\\" checked=\\\"checked\\\" data-bind=\\\"itemSessionControl.allowSkipping\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the candidate can skip the item, without submitting a response.\", options) : helperMissing.call(depth0, \"__\", \"If the candidate can skip the item, without submitting a response.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n\\n    </div>\\n\\n    <h4 class=\\\"toggler closed\\\" data-toggle=\\\"~ .itemref-time-limits\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Time Limits\", options) : helperMissing.call(depth0, \"__\", \"Time Limits\", options)))\n    + \"</h4>\\n\\n<!-- assessmentTest/timeLimits -->\\n    <div class=\\\"itemref-time-limits toggled\\\">\\n\\n\\n\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/maxTime -->\\n        <div class=\\\"grid-row\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"itemref-max-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum Duration\", options) : helperMissing.call(depth0, \"__\", \"Maximum Duration\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <input type=\\\"text\\\" name=\\\"max-time\\\" value=\\\"00:00:00\\\" data-duration=\\\"HH:mm:ss\\\" data-bind=\\\"timeLimits.maxTime\\\" data-bind-encoder=\\\"time\\\" />\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximum duration for this item.\", options) : helperMissing.call(depth0, \"__\", \"Maximum duration for this item.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n\\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/allowLateSubmission -->\\n        <div class=\\\"grid-row pseudo-label-box\\\">\\n            <div class=\\\"col-5\\\">\\n                <label for=\\\"itemref-allow-late-submission\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Late submission allowed\", options) : helperMissing.call(depth0, \"__\", \"Late submission allowed\", options)))\n    + \"</label>\\n            </div>\\n            <div class=\\\"col-6\\\">\\n                <label>\\n                    <input type=\\\"checkbox\\\" name=\\\"itemref-allow-late-submission\\\" value=\\\"true\\\" data-bind=\\\"timeLimits.allowLateSubmission\\\" data-bind-encoder=\\\"boolean\\\" />\\n                    <span class=\\\"icon-checkbox\\\"></span>\\n                </label>\\n            </div>\\n            <div class=\\\"col-1 help\\\">\\n                <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n                <div class=\\\"tooltip-content\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.\", options) : helperMissing.call(depth0, \"__\", \"Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.\", options)))\n    + \"\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiTest/controller/creator/templates/rubricblock-props', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"rubricblock-props props clearfix\\\">\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Rubric Block\", options) : helperMissing.call(depth0, \"__\", \"Rubric Block\", options)))\n    + \": \";\n  if (helper = helpers.index) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.index); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n\\n <!--assessmentTest/testPart/assessmentSection/sectionPart/rubrickBlocK/views -->\\n    <div class=\\\"grid-row\\\">\\n        <div class=\\\"col-5\\\">\\n            <label for=\\\"itemref-identifier\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Views\", options) : helperMissing.call(depth0, \"__\", \"Views\", options)))\n    + \" <abbr title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Required field\", options) : helperMissing.call(depth0, \"__\", \"Required field\", options)))\n    + \"\\\">*</abbr></label>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n            <select name=\\\"view\\\" multiple=\\\"multiple\\\" data-bind=\\\"views\\\">\\n                <option value=\\\"author\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Author\", options) : helperMissing.call(depth0, \"__\", \"Author\", options)))\n    + \"</option>\\n                <option value=\\\"candidate\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Candidate\", options) : helperMissing.call(depth0, \"__\", \"Candidate\", options)))\n    + \"</option>\\n                <option value=\\\"proctor\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Proctor\", options) : helperMissing.call(depth0, \"__\", \"Proctor\", options)))\n    + \"</option>\\n                <option value=\\\"scorer\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Scorer\", options) : helperMissing.call(depth0, \"__\", \"Scorer\", options)))\n    + \"</option>\\n                <option value=\\\"testConstructor\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Test constructor\", options) : helperMissing.call(depth0, \"__\", \"Test constructor\", options)))\n    + \"</option>\\n                <option value=\\\"tutor\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Tutor\", options) : helperMissing.call(depth0, \"__\", \"Tutor\", options)))\n    + \"</option>\\n            </select>\\n        </div>\\n        <div class=\\\"col-1 help\\\">\\n            <span class=\\\"icon-help\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span> \\n            <div class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Who can view the rubric block during the delivery.\", options) : helperMissing.call(depth0, \"__\", \"Who can view the rubric block during the delivery.\", options)))\n    + \"\\n            </div>\\n        </div>\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiTest/controller/creator/templates/index',[\n'tpl!taoQtiTest/controller/creator/templates/testpart',\n'tpl!taoQtiTest/controller/creator/templates/section', \n'tpl!taoQtiTest/controller/creator/templates/rubricblock', \n'tpl!taoQtiTest/controller/creator/templates/itemref',\n'tpl!taoQtiTest/controller/creator/templates/item',\n'tpl!taoQtiTest/controller/creator/templates/test-props',\n'tpl!taoQtiTest/controller/creator/templates/testpart-props', \n'tpl!taoQtiTest/controller/creator/templates/section-props', \n'tpl!taoQtiTest/controller/creator/templates/itemref-props', \n'tpl!taoQtiTest/controller/creator/templates/rubricblock-props'], \n\nfunction(testPart, section, rubricBlock, itemRef, item, testProps, testPartProps, sectionProps, itemRefProps, rubricBlockProps){\n    'use strict';\n\n    /**\n     * Expose all the templates used by the test creator\n     * @exports taoQtiTest/controller/creator/templates/index\n     */\n    return {\n        'testpart'      : testPart,\n        'section'       : section,\n        'itemref'       : itemRef,\n        'item'          : item,\n        'rubricblock'   : rubricBlock,\n        'properties'    : {\n            'test'      : testProps,\n            'testpart'  : testPartProps,\n            'section'   : sectionProps,\n            'itemref'   : itemRefProps,\n            'rubricblock'   : rubricBlockProps\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/item',['jquery', 'taoQtiTest/controller/creator/templates/index'], function($, templates){\n    'use strict';\n  \n    var itemTemplate = templates.item;\n \n   /**\n     * The ItemView setup items related components\n     * @exports taoQtiTest/controller/creator/views/item\n     * @param {Function} loadItems - the function used to get items from the server\n     */\n   var itemView =  function(loadItems){\n            \n        var $panel     = $('.test-creator-items .item-selection'); \n        var $search    = $('#item-filter');\n        var $itemBox   = $('.item-box', $panel);\n        \n        if(typeof loadItems === 'function'){\n            //search pattern is empty the 1st time, give it undefined\n            loadItems(undefined, function(items){\n                update(items);\n                setUpLiveSearch();\n            });\n        }\n        \n        /**\n         * Set up the search behavior: once 3 chars are enters into the field,\n         * we load the items that matches the given search pattern.\n         * @private\n         */\n        function setUpLiveSearch (){\n            var timeout;\n            \n            var liveSearch = function(){\n                var pattern = $search.val();\n                if(pattern.length > 1 || pattern.length === 0){\n                    clearTimeout(timeout);\n                    timeout = setTimeout(function(){\n                        loadItems(pattern, function(items){\n                            update(items);\n                        });\n                    }, 300);\n                }\n            };\n            \n            //trigger the search on keyp and on the magnifer button click\n            $search.keyup(liveSearch)\n                     .siblings('.ctrl').click(liveSearch);\n        }\n        \n        /**\n         * Update the items list\n         * @private\n         * @param {Array} items - the new items\n         */\n        function update (items){\n            disableSelection();\n            $itemBox.empty().append(itemTemplate(items));\n            enableSelection();\n        }\n    \n        /**\n         * Disable the selectable component\n         * @private\n         * @param {Array} items - the new items\n         */\n        function disableSelection (){\n            if($panel.data('selectable')){\n                $panel.selectable('disable');\n            }\n        }\n    \n        /**\n         * Enable to select items to be added to sections\n         * using the jquery-ui selectable.\n         * @private\n         */\n        function enableSelection (){\n            \n            if($panel.data('selectable')){\n                $panel.selectable('enable');\n            } else {\n                $panel.selectable({\n                    filter: 'li',\n                    selected: function( event, ui ) {\n                        $(ui.selected).addClass('selected');\n                    },\n                    unselected: function( event, ui ) {\n                        $(ui.unselected).removeClass('selected');\n                    },\n                    stop: function(){\n                        $(this).trigger('itemselect.creator', $('.selected')); \n                    }\n                });\n            }\n        }\n   };\n    \n    return itemView;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/property',[\n'jquery', \n'ui', \n'core/databinder', \n'taoQtiTest/controller/creator/templates/index'], \nfunction($, ui, DataBinder, templates){\n    'use strict';\n\n    /**\n     * @callback PropertyViewCallback\n     * @param {propertyView} propertyView - the view object \n     */\n   \n    /**\n     * The PropertyView setup the property panel component\n     * \n     * @exports taoQtiTest/controller/creator/views/property\n     */\n   var propView = function propView(tmplName, model){\n       var $container = $('.test-creator-props');\n       var template = templates.properties[tmplName];\n       var $view;       \n\n       /**\n        * Opens the view for the 1st time\n        */ \n       var open = function propOpen(){\n            var databinder;\n            $container.children('.props').hide().trigger('propclose.propview');\n            $view = $(template(model)).appendTo($container).filter('.props'); \n            \n            //start listening for DOM compoenents inside the view\n            ui.startDomComponent($view);\n\n            //start the data binding\n            databinder = new DataBinder($view, model);\n            databinder.bind();\n    \n            propValidation(); \n\n            $view.trigger('propopen.propview');\n       };\n\n       /**\n        * Get the view container element\n        * @returns {jQueryElement}\n        */  \n       var getView = function propGetView(){\n            return $view;\n       };\n           \n       /**\n        * Check wheter the view is displayed\n        * @returns {boolean} true id opened\n        */  \n       var isOpen = function propIsOpen(){\n            return $view.css('display') !== 'none';\n       };\n\n       /**\n        * Bind a callback on view open\n        * @param {PropertyViewCallback} cb\n        */  \n       var onOpen = function propOnOpen(cb){\n            $view.on('propopen.propview', function(e){\n                e.stopPropagation();\n                cb(); \n            });\n       };\n\n       \n       /**\n        * Bind a callback on view close\n        * @param {PropertyViewCallback} cb\n        */  \n       var onClose = function propOnClose(cb){\n            $view.on('propclose.propview', function(e){\n                e.stopPropagation();\n                cb(); \n            });\n       };\n\n       /**\n        * Removes the property view\n        */  \n       var destroy = function propDestroy(){\n            $view.remove();\n       };\n       \n       /**\n        * Toggles the property view display\n        */  \n       var toggle = function propToggle(){\n            $container.children('.props').not($view).hide().trigger('propclose.propview');\n            if(isOpen()){\n                $view.hide().trigger('propclose.propview');\n            } else {\n                $view.show().trigger('propopen.propview');\n            }\n       };\n      \n       /**\n        * Set up the validation on the property view\n        * @private\n        */  \n       function propValidation() {\n            $view.on('validated.group', function(e, isValid){\n                if(e.namespace === 'group'){\n                    var $togglers = $('#test-creator .property-toggler, #saver');\n                    if(isValid === true){\n                        $togglers.removeClass('disabled');\n                    } else {\n                        $togglers.addClass('disabled');\n                    }\n                }\n            });\n            $view.groupValidator();\n        }\n\n      return {\n        open : open,\n        getView : getView,\n        isOpen : isOpen,\n        onOpen : onOpen,\n        onClose : onClose,\n        destroy : destroy,\n        toggle : toggle\n      }; \n   };\n\n   return propView;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/actions',[\n'jquery', \n'taoQtiTest/controller/creator/views/property'], \nfunction($, propertyView){\n    'use strict';\n\n    var disabledClass = 'disabled';\n    var activeClass = 'active';\n    var btnOnClass = 'tlb-button-on';\n\n    /**\n     * Set up the property view for an element\n     * @param {jQueryElement} $container - that contains the property opener\n     * @param {String} template - the name of the template to give to the propertyView\n     * @param {Object} model - the model to bind\n     * @param {PropertyViewCallback} cb - execute at view setup phase\n     */ \n    function properties ($container, template, model, cb) {\n        var propView = null;\n        $container.find('.property-toggler').on('click', function(e){\n            e.preventDefault();\n            var $elt = $(this);\n            if(!$(this).hasClass(disabledClass)){\n\n                $elt.blur(); //to remove the focus\n\n                if(propView === null){\n\n                    $container.addClass(activeClass);\n                    $elt.addClass(btnOnClass);\n\n                    propView = propertyView(template, model);\n                    propView.open();\n                    \n                    propView.onOpen(function(){\n                        $container.addClass(activeClass);\n                        $elt.addClass(btnOnClass);\n                    });\n                    propView.onClose(function(){\n                        $container.removeClass(activeClass);\n                        $elt.removeClass(btnOnClass);\n                    });\n\n                    if(typeof cb === 'function'){\n                        cb(propView);\n                    }\n                } else { \n                    propView.toggle();\n                } \n            }\n        });\n    }\n\n\n    /**\n     * Enable to move an element\n     * @param {jQueryElement} $actionContainer - where the mover is\n     * @param {String} containerClass - the cssClass of the element container\n     * @param {String} elementClass - the cssClass to identify elements \n     */ \n    function move ($actionContainer, containerClass, elementClass) {\n        var $element = $actionContainer.parents('.' + elementClass);\n        var $container = $element.parents('.' + containerClass ); \n   \n        //move up an element\n        $('.move-up', $actionContainer).click(function(e){\n            var $elements, index;\n    \n            //prevent default and click during animation\n            e.preventDefault();\n            if($element.is(':animated')){\n                return false;\n            }\n    \n            //get the position\n            $elements = $('.' + elementClass, $container);\n            console.log($elements.length);\n            index = $elements.index($element);\n            if (index > 0) {\n                $element.fadeOut(200, function(){\n                    console.log('.' + elementClass + ' :eq(' + (index - 1) + ')');\n                    $element\n                        .insertBefore($('.' + elementClass + ' :eq(' + (index - 1) + ')', $container))\n                        .fadeIn(400, function(){\n                            $container.trigger('change');\n                        });\n                });\n            }\n        });\n\n        //move down an element\n        $('.move-down', $actionContainer).click(function(e){\n            var $elements, index;\n    \n            //prevent default and click during animation\n            e.preventDefault();\n            if($element.is(':animated')){\n                return false;\n            }\n\n            //get the position\n            $elements = $('.' + elementClass, $container);\n            console.log($elements.length);\n            index = $elements.index($element);\n            if (index < ($elements.length - 1) && $elements.length > 1) {\n\n                console.log('.' + elementClass + ' :eq(' + (index + 1) + ')');\n                $element.fadeOut(200, function(){\n                    $element\n                        .insertAfter($('.' + elementClass + ' :eq(' + (index + 1) + ')', $container))\n                        .fadeIn(400, function(){\n                            $container.trigger('change');\n                        });\n                });\n            }\n        });\n    }\n   \n    /**\n     * Update the movable state of an element\n     * @param {jQueryElement} $container - the movable elements (scopped) \n     * @param {String} elementClass - the cssClass to identify elements \n     * @param {String} actionContainerElt - the element name that contains the actions \n     */ \n    function movable ($container, elementClass, actionContainerElt){\n        $container.each(function(){\n            var $elt = $(this);\n            var $actionContainer = $(actionContainerElt, $elt);\n\n            var index = $container.index($elt);\n            var $moveUp = $('.move-up', $actionContainer);\n            var $moveDown = $('.move-down', $actionContainer);\n            \n            //only one test part, no moving               \n            if( $container.length === 1 ){\n                $moveUp.addClass(disabledClass);\n                $moveDown.addClass(disabledClass);\n\n            //testpart is the first, only moving down\n            } else if(index === 0) {\n                $moveUp.addClass(disabledClass);\n                $moveDown.removeClass(disabledClass);\n\n            //testpart is the lasst, only moving up\n            } else if ( index >= ($container.length - 1) ) {\n                $moveDown.addClass(disabledClass);\n                $moveUp.removeClass(disabledClass);\n            \n            //or enable moving top/bottom\n            } else {\n                $moveUp.removeClass(disabledClass);\n                $moveDown.removeClass(disabledClass);\n            }\n         });\n    }\n\n    /**\n     * Update the removable state of an element\n     * @param {jQueryElement} $container - that contains the removable action\n     * @param {String} actionContainerElt - the element name that contains the actions \n     */ \n    function removable ($container, actionContainerElt){\n        $container.each(function(){\n            var $elt = $(this);\n            var $actionContainer = $(actionContainerElt, $elt);\n            var $delete = $('[data-delete]', $actionContainer);\n\n            if($container.length <= 1){\n                $delete.addClass(disabledClass);\n            } else {\n                $delete.removeClass(disabledClass);\n            }\n        });\n    }\n\n    /**\n     * Disable all the actions of the target\n     * @param {jQueryElement} $container - that contains the the actions\n     * @param {String} actionContainerElt - the element name that contains the actions \n     */ \n    function disable($container, actionContainerElt){\n        $container.find(actionContainerElt).find('[data-delete],.move-up,.move-down').addClass(disabledClass);    \n    }\n    \n    /**\n     * Enable all the actions of the target\n     * @param {jQueryElement} $container - that contains the the actions\n     * @param {String} actionContainerElt - the element name that contains the actions \n     */ \n    function enable($container, actionContainerElt){\n        $container.find(actionContainerElt).find('[data-delete],.move-up,.move-down').removeClass(disabledClass);    \n    }\n\n    /**\n     * The actions gives you shared behavior for some actions. \n     * \n     * @exports taoQtiTest/controller/creator/views/actions\n     */\n    return {\n        properties  : properties,\n        move        : move,\n        removable   : removable,\n        movable     : movable,\n        disable     : disable,\n        enable      : enable\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/itemref',[\n'jquery',\n'lodash', \n'i18n',\n'taoQtiTest/controller/creator/views/actions'],\nfunction($, _, __, actions){\n    'use strict';\n\n   /**\n    * Set up an item ref: init action beahviors. Called for each one.\n    *\n    * @param {jQueryElement} $itemRef - the itemRef element to set up\n    * @param {Object} model - the data model to bind to the ref\n    */\n   var setUp =  function setUp ($itemRef, model){\n\n        var $actionContainer = $('.actions', $itemRef);\n        \n        actions.properties($actionContainer, 'itemref', model, propHandler);\n        actions.move($actionContainer, 'itemrefs', 'itemref');\n\n        resize();\n\n        /**\n         * Perform some binding once the property view is create\n         * @private\n         * @param {propView} propView - the view object\n         */\n        function propHandler (propView) {\n\n            categoriesProperty(propView.getView().find('[name=itemref-category]'));\n            \n            $itemRef.parents('.testpart').on('delete', removePropHandler);\n            $itemRef.parents('.section').on('delete', removePropHandler);\n            $itemRef.on('delete', removePropHandler);\n            \n            function removePropHandler(e){\n                if(propView !== null){\n                    propView.destroy();\n                }\n            }\n        }\n\n        /**\n         * Set up the category property\n         * @private\n         * @param {jQueryElement} $select - the select box to set up\n         */\n        function categoriesProperty($select){\n            $select.select2({\n                width: '100%',\n                tags : [],\n                multiple : true,\n                tokenSeparators: [\",\", \" \", \";\"],\n                formatNoMatches : function(){\n                    return __('Enter a category');\n                },\n                maximumInputLength : 32\n            });\n        }\n   };\n\n   /**\n    * Listen for state changes to enable/disable . Called globally.\n    */\n   var listenActionState =  function listenActionState (){\n\n        var $actionContainer;\n        \n        $('.itemrefs').each(function(){\n            actions.movable($('.itemref', $(this)), 'itemref', '.actions');\n        });\n       \n        $(document)\n        .on('delete', function(e){\n            var $parent;\n            var $target = $(e.target);\n            if($target.hasClass('itemref')){\n                $parent = $target.parents('.itemrefs');\n                actions.disable($parent.find('.itemref'), '.actions');\n           }\n        })\n        .on('add change undo.deleter deleted.deleter', '.itemrefs',  function(e){\n            var $parent;\n            var $target = $(e.target);\n            if($target.hasClass('itemref') || $target.hasClass('itemrefs')){\n                $parent = $('.itemref', $target.hasClass('itemrefs') ? $target : $target.parents('.itemrefs'));\n                actions.enable($parent, '.actions');\n                actions.movable($parent, 'itemref', '.actions');\n            }\n        });\n   };\n\n    /**\n     * We need to resize the itemref in case of long labels\n     */\n    var resize = _.throttle(function resize(){\n        var $refs = $('.itemrefs').first();\n        var $actions = $('.itemref .actions').first();\n        var width = $refs.innerWidth() - $actions.outerWidth();\n        $('.itemref > .title').width(width); \n    }, 100);\n    \n    /**\n     * The itemrefView setup itemref related components and beahvior\n     * \n     * @exports taoQtiTest/controller/creator/views/itemref\n     */\n    return {\n        setUp : setUp,\n        listenActionState: listenActionState,\n        resize : resize\n   };\n \n});\n\n","define('taoQtiItem/qtiItem/core/qtiClasses',[], function(){\n    return {\n        '_container' : 'taoQtiItem/qtiItem/core/Container',\n        'assessmentItem' : 'taoQtiItem/qtiItem/core/Item',\n        'responseProcessing' : 'taoQtiItem/qtiItem/core/ResponseProcessing',\n        '_simpleFeedbackRule' : 'taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',\n        'stylesheet' : 'taoQtiItem/qtiItem/core/Stylesheet',\n        'math' : 'taoQtiItem/qtiItem/core/Math',\n        'img' : 'taoQtiItem/qtiItem/core/Img',\n        'object' : 'taoQtiItem/qtiItem/core/Object',\n        'outcomeDeclaration' : 'taoQtiItem/qtiItem/core/variables/OutcomeDeclaration',\n        'responseDeclaration' : 'taoQtiItem/qtiItem/core/variables/ResponseDeclaration',\n        'rubricBlock' : 'taoQtiItem/qtiItem/core/RubricBlock',\n        'associableHotspot' : 'taoQtiItem/qtiItem/core/choices/AssociableHotspot',\n        'gap' : 'taoQtiItem/qtiItem/core/choices/Gap',\n        'gapImg' : 'taoQtiItem/qtiItem/core/choices/GapImg',\n        'gapText' : 'taoQtiItem/qtiItem/core/choices/GapText',\n        'hotspotChoice' : 'taoQtiItem/qtiItem/core/choices/HotspotChoice',\n        'hottext' : 'taoQtiItem/qtiItem/core/choices/Hottext',\n        'inlineChoice' : 'taoQtiItem/qtiItem/core/choices/InlineChoice',\n        'simpleAssociableChoice' : 'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',\n        'simpleChoice' : 'taoQtiItem/qtiItem/core/choices/SimpleChoice',\n        'associateInteraction' : 'taoQtiItem/qtiItem/core/interactions/AssociateInteraction',\n        'choiceInteraction' : 'taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',\n        'endAttemptInteraction' : 'taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiItem/core/interactions/HotspotInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiItem/core/interactions/HottextInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiItem/core/interactions/MatchInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiItem/core/interactions/MediaInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiItem/core/interactions/OrderInteraction',\n        'prompt' : 'taoQtiItem/qtiItem/core/interactions/Prompt',\n        'selectPointInteraction' : 'taoQtiItem/qtiItem/core/interactions/SelectPointInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiItem/core/interactions/SliderInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiItem/core/interactions/TextEntryInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiItem/core/interactions/UploadInteraction',\n        'feedbackBlock' : 'taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock',\n        'feedbackInline' : 'taoQtiItem/qtiItem/core/feedbacks/FeedbackInline',\n        'modalFeedback' : 'taoQtiItem/qtiItem/core/feedbacks/ModalFeedback',\n        'customInteraction' : 'taoQtiItem/qtiItem/core/interactions/CustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiItem/core/PortableInfoControl'\n    };\n});\n","/**\n * Define the location of all qti classes used in the QTI Creator\n */\ndefine('taoQtiItem/qtiCreator/model/qtiClasses',['lodash', 'taoQtiItem/qtiItem/core/qtiClasses'], function(_, qtiClasses){\n\n    //clone the qtiClasses instead of modifying it by direct extend:\n    return _.defaults({\n        'assessmentItem' : 'taoQtiItem/qtiCreator/model/Item',\n        '_container' : 'taoQtiItem/qtiCreator/model/Container',\n        'img' : 'taoQtiItem/qtiCreator/model/Img',\n        'math' : 'taoQtiItem/qtiCreator/model/Math',\n        'object' : 'taoQtiItem/qtiCreator/model/Object',\n        'rubricBlock' : 'taoQtiItem/qtiCreator/model/RubricBlock',\n        'modalFeedback' : 'taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback',\n        'choiceInteraction' : 'taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/OrderInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCreator/model/interactions/AssociateInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/MatchInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction',\n        'simpleChoice' : 'taoQtiItem/qtiCreator/model/choices/SimpleChoice',\n        'simpleAssociableChoice' : 'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',\n        'inlineChoice' : 'taoQtiItem/qtiCreator/model/choices/InlineChoice',\n        'mediaInteraction' : 'taoQtiItem/qtiCreator/model/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCreator/model/interactions/UploadInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/SliderInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCreator/model/interactions/HotspotInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction',\n        'graphicInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',\n        'hotspotChoice' : 'taoQtiItem/qtiCreator/model/choices/HotspotChoice',\n        'gapImg' : 'taoQtiItem/qtiCreator/model/choices/GapImg',\n        'associableHotspot' : 'taoQtiItem/qtiCreator/model/choices/AssociableHotspot',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiCreator/model/interactions/HottextInteraction',\n        'hottext' : 'taoQtiItem/qtiCreator/model/choices/Hottext',\n        'gapText' : 'taoQtiItem/qtiCreator/model/choices/GapText',\n        'gap' : 'taoQtiItem/qtiCreator/model/choices/Gap',\n        'responseDeclaration' : 'taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',\n        'responseProcessing' : 'taoQtiItem/qtiCreator/model/ResponseProcessing',\n        'customInteraction' : 'taoQtiItem/qtiCreator/model/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCreator/model/PortableInfoControl'\n    }, qtiClasses);\n\n});\n\n","/**\n * Common basic util functions\n */\ndefine('taoQtiItem/qtiItem/helper/util',['lodash'], function(_){\n    var util = {\n        buildSerial : function buildSerial(prefix){\n            var id = prefix || '';\n            var chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n            for(var i = 0; i < 22; i++){\n                id += chars.charAt(Math.floor(Math.random() * chars.length));\n            }\n            return id;\n        },\n        fullpath : function fullpath(src, baseUrl){\n\n            src = src || '';\n            baseUrl = baseUrl || '';\n\n            if(src){\n\n                src = src.replace(/^\\//, '');\n\n                if(!src.match(/^http/i)){\n\n                    if(baseUrl && !baseUrl.match(/\\/$/)){\n                        baseUrl += '/';\n                    }\n\n                    src = baseUrl + src;\n                }\n            }\n\n            return src;\n        },\n        findInCollection : function findInCollection(element, collectionNames, searchedSerial){\n\n            var found = null;\n\n            if(_.isString(collectionNames)){\n                collectionNames = [collectionNames];\n            }\n\n            if(_.isArray(collectionNames)){\n\n                _.each(collectionNames, function(collectionName){\n\n                    //get collection to search in (resolving case like interaction.choices.0\n                    var collection = element;\n                    _.each(collectionName.split('.'), function(nameToken){\n                        collection = collection[nameToken];\n                    });\n                    var elt = collection[searchedSerial];\n\n                    if(elt){\n                        found = {'parent' : element, 'element' : elt};\n                        return false;//break the each loop\n                    }\n\n                    //search inside each elements:\n                    _.each(collection, function(elt){\n\n                        if(_.isFunction(elt.find)){\n                            found = elt.find(searchedSerial);\n                            if(found){\n                                return false;//break the each loop\n                            }\n                        }\n\n                    });\n\n                    if(found){\n                        return false;//break the each loop\n                    }\n\n                });\n\n            }else{\n\n                throw new Error('invalid argument : colllectionNames must be an array or a string');\n            }\n\n            return found;\n        },\n        addMarkupNamespace : function addMarkupNamespace(markup, ns){\n            return ns ? markup.replace(/<(\\/)?([^!\\/:>]+)(\\/)?>/g, '<$1' + ns + ':$2$3>') : markup;\n        },\n        removeMarkupNamespaces : function removeMarkupNamespace(markup){\n            return markup.replace(/<(\\/)?(\\w*):([^>]*)>/g, '<$1$3>');\n        },\n        getMarkupUsedNamespaces : function getMarkupUsedNamespaces(markup){\n            var namespaces = [];\n            markup.replace(/<(\\/)?(\\w*):([^>]*)>/g, function(original, slash, ns, node){\n                namespaces.push(ns);\n                return '<'+slash+node+'>';\n            });\n            return _.uniq(namespaces);\n        }\n    };\n\n    return util;\n});\n","define('taoQtiItem/qtiItem/helper/rendererConfig',['lodash', 'jquery'], function(_, $){\n\n    var rendererConfigHelper = {};\n\n    rendererConfigHelper.getOptionsFromArguments = function(args){\n\n        var options = {\n            data : {},\n            placeholder : null,\n            subclass : '',\n            renderer : null\n        };\n        \n        _.each(args, function(arg){\n            if(arg){\n                if(arg.isRenderer){\n                    options.renderer = arg;\n                }else if(arg instanceof $ && arg.length){\n                    options.placeholder = arg;\n                }else if(_.isString(arg)){\n                    options.subclass = arg;\n                }else if(_.isPlainObject(arg)){\n                    options.data = arg;\n                }else{\n                    console.log('invalid arg', arg, args);\n                }\n            }\n        });\n        \n        return options;\n    };\n    \n    return rendererConfigHelper;\n});\n\n","define('taoQtiItem/qtiItem/core/Element',['jquery', 'class', 'lodash', 'taoQtiItem/qtiItem/helper/util', 'taoQtiItem/qtiItem/helper/rendererConfig'], function($, Class, _, util, rendererConfig){\n\n    var _instances = {};\n\n    var Element = Class.extend({\n        qtiClass : '',\n        serial : '',\n        relatedItem : null,\n        init : function(serial, attributes){\n\n            //init own attributes\n            this.attributes = {};\n\n            //system properties, for item creator internal use only\n            this.metaData = {};\n\n            //init call in the format init(attributes)\n            if(typeof (serial) === 'object'){\n                attributes = serial;\n                serial = '';\n            }\n\n            if(!serial){\n                serial = util.buildSerial(this.qtiClass + '_');\n            }\n\n            if(serial && (typeof serial !== 'string' || !serial.match(/^[a-z_0-9]*$/i))){\n                throw 'invalid QTI serial : (' + (typeof serial) + ') ' + serial;\n            }\n\n            if(!_instances[serial]){\n                _instances[serial] = this;\n                this.serial = serial;\n                this.setAttributes(attributes || {});\n            }else{\n                throw 'a QTI Element with the same serial already exists ' + serial;\n            }\n\n            if(typeof this.initContainer === 'function'){\n                this.initContainer(arguments[2] || '');\n            }\n            if(typeof this.initObject === 'function'){\n                this.initObject();\n            }\n        },\n        is : function(qtiClass){\n            return (qtiClass === this.qtiClass);\n        },\n        placeholder : function(){\n            return '{{' + this.serial + '}}';\n        },\n        getSerial : function(){\n            return this.serial;\n        },\n        getUsedIdentifiers : function(){\n            var usedIds = {};\n            var elts = this.getComposingElements();\n            for(var i in elts){\n                var elt = elts[i];\n                var id = elt.attr('identifier');\n                if(id){\n                    //warning: simplistic implementation, allow only one unique identifier in the item no matter the element class/type\n                    usedIds[id] = elt;\n                }\n            }\n            return usedIds;\n        },\n        attr : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.attributes[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.attr(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.attributes[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.attributes[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        data : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.metaData[name] = value;\n                    $(document).trigger('metaChange.qti-widget', {element : this, key : name, value : value});\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.data(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.metaData[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.metaData[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeData : function(name){\n            delete this.metaData[name];\n            return this;\n        },\n        removeAttr : function(name){\n            return this.removeAttributes(name);\n        },\n        setAttributes : function(attributes){\n            this.attributes = attributes;\n            return this;\n        },\n        getAttributes : function(){\n            return _.clone(this.attributes);\n        },\n        removeAttributes : function(attrNames){\n            if(typeof (attrNames) === 'string'){\n                attrNames = [attrNames];\n            }\n            for(var i in attrNames){\n                delete this.attributes[attrNames[i]];\n            }\n            return this;\n        },\n        getComposingElements : function(){\n            var elts = {};\n            if(typeof this.initContainer === 'function'){\n                var container = this.getBody();\n                elts[container.getSerial()] = container;//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, container.getComposingElements());\n            }\n            if(typeof this.initObject === 'function'){\n                var object = this.getObject();\n                elts[object.getSerial()] = object;//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, object.getComposingElements());\n            }\n            _.each(this.metaData, function(v){\n                if(Element.isA(v, '_container')){\n                    elts[v.getSerial()] = v;\n                    elts = _.extend(elts, v.getComposingElements());\n                }\n            });\n            return elts;\n        },\n        getUsedClasses : function(){\n\n            var ret = [this.qtiClass],\n                composingElts = this.getComposingElements();\n\n            _.each(composingElts, function(elt){\n                ret.push(elt.qtiClass);\n            });\n\n            return _.uniq(ret);\n        },\n        find : function(serial){\n\n            var found = null;\n\n            if(typeof this.initObject === 'function'){\n                var object = this.getObject();\n                if(object.serial === serial){\n                    found = {'parent' : this, 'element' : object, 'location' : 'object'};\n                }\n            }\n\n            if(!found && typeof this.initContainer === 'function'){\n                found = this.getBody().find(serial, this);\n            }\n\n            return found;\n        },\n        parent : function(){\n            var item = this.getRelatedItem();\n            if(item){\n                var found = item.find(this.getSerial());\n                if(found){\n                    return found.parent;\n                }\n            }\n            return null;\n        },\n        setRelatedItem : function(item, recursive){\n\n            recursive = (typeof recursive === 'undefined') ? true : recursive;\n\n            if(Element.isA(item, 'assessmentItem')){\n                this.relatedItem = item;\n                var composingElts = this.getComposingElements();\n                for(var i in composingElts){\n                    composingElts[i].setRelatedItem(item, false);\n                }\n            }\n\n        },\n        getRelatedItem : function(){\n            var ret = null;\n            if(Element.isA(this.relatedItem, 'assessmentItem')){\n                ret = this.relatedItem;\n            }\n            return ret;\n        },\n        setRenderer : function(renderer){\n            if(renderer && renderer.isRenderer){\n                this.renderer = renderer;\n                var elts = this.getComposingElements();\n                for(var serial in elts){\n                    elts[serial].setRenderer(renderer);\n                }\n            }else{\n                throw 'invalid qti rendering engine';\n            }\n        },\n        getRenderer : function(){\n            return this.renderer;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments);\n            var renderer = args.renderer || this.getRenderer();\n\n            var tplData = {},\n                defaultData = {\n                    'tag' : this.qtiClass,\n                    'serial' : this.serial,\n                    'attributes' : this.getAttributes()\n                };\n\n            if(!renderer){\n                throw 'render: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n\n            if(typeof this.initContainer === 'function'){\n                defaultData.body = this.getBody().render(renderer);\n            }\n            if(typeof this.initObject === 'function'){\n                defaultData.object = {\n                    attributes : this.object.getAttributes()\n                };\n                defaultData.object.attributes.data = renderer.getAbsoluteUrl(this.object.attr('data'));\n            }\n\n            tplData = _.merge(defaultData, args.data || {});\n            tplData = renderer.getData(this, tplData, args.subclass);\n            var rendering = renderer.renderTpl(this, tplData, args.subclass);\n            if(args.placeholder){\n                args.placeholder.replaceWith(rendering);\n            }\n\n            return rendering;\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            if(typeof this.initContainer === 'function'){\n                //post render body element\n                this.getBody().postRender({}, '', renderer);\n            }\n            \n            if(renderer){\n                return renderer.postRender(this, data, altClassName);\n            }else{\n                throw 'postRender: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n        },\n        getContainer : function($scope, subclass){\n            var renderer = this.getRenderer();\n            if(renderer){\n                return renderer.getContainer(this, $scope, subclass);\n            }else{\n                throw 'getContainer: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n        },\n        toArray : function(){\n            var arr = {\n                serial : this.serial,\n                type : this.qtiClass,\n                attributes : this.getAttributes()\n            };\n\n            if(typeof this.initContainer === 'function'){\n                arr.body = this.getBody().toArray();\n            }\n            if(typeof this.initObject === 'function'){\n                arr.object = this.object.toArray();\n            }\n\n            return arr;\n        },\n        isEmpty : function(){\n            //tells whether the element should be considered empty or not, from the rendering point of view\n            return false;\n        },\n        addClass : function(className){\n            var clazz = this.attr('class') || '';\n            if(!_containClass(clazz, className)){\n                this.attr('class', clazz + (clazz.length ? ' ' : '') + className);\n            }\n        },\n        hasClass : function(className){\n            return _containClass(this.attr('class'), className);\n        },\n        removeClass : function(className){\n\n            var clazz = this.attr('class') || '';\n            if(clazz){\n                var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n                clazz = clazz.replace(regex, '').replace(/^\\s+/, '');\n                if(clazz){\n                    this.attr('class', clazz);\n                }else{\n                    this.removeAttr('class');\n                }\n            }\n        },\n        isset : function(){\n            return Element.issetElement(this.serial);\n        },\n        unset : function(){\n            return Element.unsetElement(this.serial);\n        }\n    });\n\n    var _containClass = function(allClassStr, className){\n        var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n        return allClassStr && regex.test(allClassStr);\n    };\n\n    //helpers\n    Element.isA = function(qtiElement, qtiClass){\n        return (qtiElement instanceof Element && qtiElement.is(qtiClass));\n    };\n\n    Element.getElementBySerial = function(serial){\n        return _instances[serial];\n    };\n    \n    Element.issetElement = function(serial){\n        return !!_instances[serial];\n    };\n    \n    Element.unsetElement = function(serial){\n        \n        var element = Element.getElementBySerial(serial);\n        \n        if(element){\n            \n            var composingElements = element.getComposingElements();\n            _.each(composingElements, function(elt){\n                delete _instances[elt.serial];\n            });\n            delete _instances[element.serial];\n            \n        }else{\n            throw 'cannot unset an element that does not exist';\n        }\n        \n        return true;\n    };\n\n    return Element;\n});\n\n\n\n","/**\n * Common helper functions\n */\ndefine('taoQtiItem/qtiItem/helper/interactionHelper',['lodash', 'taoQtiItem/qtiItem/core/Element'], function(_, Element){\n    return {\n        convertChoices : function(choices, outputType){\n\n            var ret = [], _this = this;\n\n            _.each(choices, function(c){\n                if(Element.isA(c, 'choice')){\n                    switch(outputType){\n                        case 'serial':\n                            ret.push(c.getSerial());\n                            break;\n                        case 'identifier':\n                            ret.push(c.id());\n                            break;\n                        default:\n                            ret.push(c);\n                    }\n\n                }else if(_.isArray(c)){\n                    ret.push(_this.convertChoices(c, outputType));\n                }\n            });\n\n            return ret;\n        },\n        findChoices : function(interaction, choices, inputType){\n\n            var ret = [], _this = this;\n\n            _.each(choices, function(c){\n                var choice;\n                if(_.isString(c)){\n                    if(inputType === 'serial'){\n                        choice = interaction.getChoice(c);\n                        if(choice){\n                            ret.push(choice);\n                        }\n                    }else if(inputType === 'identifier'){\n                        choice = interaction.getChoiceByIdentifier(c);\n                        if(choice){\n                            ret.push(choice);\n                        }\n                    }else{\n                        ret.push(c);\n                    }\n                }else if(_.isArray(c)){\n                    ret.push(_this.findChoices(interaction, c, inputType));\n                }else{\n                    ret.push(c);\n                }\n            });\n\n            return ret;\n        },\n        shuffleChoices : function(choices){\n            var r = [], //returned array\n                f = {}, //fixed choices array\n                j = 0;\n\n            for(var i in choices){\n                if(Element.isA(choices[i], 'choice')){\n                    var choice = choices[i];\n                    if(choice.attr('fixed')){\n                        f[j] = choice;\n                    }\n                    r.push(choice);\n                    j++;\n                }else{\n                    throw 'invalid element in array: is not a qti choice';\n                }\n            }\n\n            for(var n = 0; n < r.length - 1; n++){\n                if(f[n]){\n                    continue;\n                }\n                var k = -1;\n                do{\n                    k = n + Math.floor(Math.random() * (r.length - n));\n                }while(f[k]);\n                var tmp = r[k];\n                r[k] = r[n];\n                r[n] = tmp;\n            }\n\n            return r;\n        },\n        serialToIdentifier : function(interaction, choiceSerial){\n            var choice = interaction.getChoice(choiceSerial);\n            if(choice){\n                return choice.id();\n            }else{\n                return '';\n            }\n        }\n    }\n});\n","define('taoQtiItem/qtiRunner/core/Renderer',[\n    'lodash',\n    'jquery',\n    'handlebars',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/helper/interactionHelper'\n], function(_, $, Handlebars, Element, interactionHelper){\n\n    'use strict';\n\n    var _isValidRenderer = function(renderer){\n\n        var valid = true;\n\n        if(typeof (renderer) !== 'object'){\n            return false;\n        }\n\n        var classCorrect = false;\n        if(renderer.qtiClass){\n            if(_.indexOf(_renderableClasses, renderer.qtiClass) >= 0){\n                classCorrect = true;\n            }else{\n                var pos = renderer.qtiClass.indexOf('.');\n                if(pos > 0){\n                    var qtiClass = renderer.qtiClass.slice(0, pos);\n                    var subClass = renderer.qtiClass.slice(pos + 1);\n                    if(_renderableSubclasses[qtiClass] && _.indexOf(_renderableSubclasses[qtiClass], subClass) >= 0){\n                        classCorrect = true;\n                    }\n                }\n            }\n        }\n        if(!classCorrect){\n            valid = false;\n            throw new Error('invalid qti class name in renderer declaration : ' + renderer.qtiClass);\n        }\n\n        if(!renderer.template){\n            valid = false;\n            throw new Error('missing template in renderer declaration : ' + renderer.qtiClass);\n        }\n\n        return valid;\n    };\n\n    var _renderableClasses = [\n        '_container',\n        'assessmentItem',\n        'stylesheet',\n        'responseDeclaration',\n        'outcomeDeclaration',\n        'responseProcessing',\n        '_simpleFeedbackRule',\n        'img',\n        'math',\n        'object',\n        'modalFeedback',\n        'rubricBlock',\n        'associateInteraction',\n        'choiceInteraction',\n        'extendedTextInteraction',\n        'gapMatchInteraction',\n        'graphicAssociateInteraction',\n        'graphicGapMatchInteraction',\n        'graphicOrderInteraction',\n        'hotspotInteraction',\n        'hottextInteraction',\n        'inlineChoiceInteraction',\n        'matchInteraction',\n        'mediaInteraction',\n        'orderInteraction',\n        'selectPointInteraction',\n        'sliderInteraction',\n        'textEntryInteraction',\n        'uploadInteraction',\n        'endAttemptInteraction',\n        'customInteraction',\n        'prompt',\n        'associableHotspot',\n        'gap',\n        'gapImg',\n        'gapText',\n        'hotspotChoice',\n        'hottext',\n        'inlineChoice',\n        'simpleAssociableChoice',\n        'simpleChoice',\n        'infoControl'\n    ];\n\n    var _dependencies = {\n        assessmentItem : ['stylesheet', '_container', 'prompt', 'modalFeedback'],\n        rubricBlock : ['_container'],\n        associateInteraction : ['simpleAssociableChoice'],\n        choiceInteraction : ['simpleChoice'],\n        gapMatchInteraction : ['gap', 'gapText'],\n        graphicAssociateInteraction : ['associableHotspot'],\n        graphicGapMatchInteraction : ['associableHotspot', 'gapImg'],\n        graphicOrderInteraction : ['hotspotChoice'],\n        hotspotInteraction : ['hotspotChoice'],\n        hottextInteraction : ['hottext'],\n        inlineChoiceInteraction : ['inlineChoice'],\n        matchInteraction : ['simpleAssociableChoice'],\n        orderInteraction : ['simpleChoice']\n    };\n\n    var _renderableSubclasses = {\n        'simpleAssociableChoice' : ['associateInteraction', 'matchInteraction'],\n        'simpleChoice' : ['choiceInteraction', 'orderInteraction']\n    };\n    \n    /**\n     * Get the location of the document, useful to define a baseUrl for the required context\n     * @returns {String}\n     */\n    function getDocumentBaseUrl(){\n        return window.location.protocol + '//' + window.location.host + window.location.pathname.replace(/([^\\/]*)$/, '');\n    }\n    \n    var Renderer = function(options){\n\n        options = options || {};\n\n        this.isRenderer = true;\n        this.name = '';\n        this.shuffleChoices = (options.shuffleChoices !== undefined) ? options.shuffleChoices : true;\n\n        //store shuffled choice here\n        this.shuffledChoices = [];\n\n        /**\n         * Store the registered renderer location\n         */\n        var _locations = {};\n\n        /**\n         * Store loaded renderers\n         */\n        var _renderers = {};\n\n        /**\n         * Get the actual renderer of the give qti class or subclass:\n         * e.g. simplceChoice, simpleChoice.choiceInteraction, simpleChoice.orderInteraction\n         */\n        var _getClassRenderer = function(qtiClass){\n            var ret = null;\n            if(_renderers[qtiClass]){\n                ret = _renderers[qtiClass];\n            }else{\n                var pos = qtiClass.indexOf('.');\n                if(pos > 0){\n                    qtiClass = qtiClass.slice(0, pos);\n                    if(_renderers[qtiClass]){\n                        ret = _renderers[qtiClass]\n                    }\n                }\n            }\n            return ret;\n        };\n\n        this.setOption = function(key, value){\n            if(typeof (key) === 'string'){\n                options[key] = value;\n            }\n            return this;\n        };\n\n        this.setOptions = function(opts){\n            _.extend(options, opts);\n            return this;\n        };\n\n        this.getOption = function(key){\n            if(typeof (key) === 'string' && options[key]){\n                return options[key];\n            }\n            return null;\n        };\n\n        this.renderTpl = function(element, data, qtiSubclass){\n\n            var ret = '',\n                tplFound = false,\n                qtiClass = qtiSubclass || element.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.template) === 'function'){\n                    ret = renderer.template(data);\n                    tplFound = true;\n                }\n            }\n\n            if(!tplFound){\n                throw new Error('no renderer template loaded under the class name : ' + qtiClass);\n            }\n\n            return ret;\n        };\n\n        this.getData = function(element, data, qtiSubclass){\n\n            var ret = data,\n                qtiClass = qtiSubclass || element.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.getData) === 'function'){\n                    ret = renderer.getData.call(this, element, data);\n                }\n            }\n\n            return ret;\n        };\n\n        this.renderDirect = function(tpl, data){\n            return Handlebars.compile(tpl)(data);\n        };\n\n        this.getContainer = function(qtiElement, $scope, qtiSubclass){\n\n            var ret = null,\n                qtiClass = qtiSubclass || qtiElement.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                ret = renderer.getContainer(qtiElement, $scope);\n            }else{\n                throw 'no renderer found for the class : ' + qtiElement.qtiClass;\n            }\n            return ret;\n        };\n\n        this.postRender = function(qtiElement, data, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiElement.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.render) === 'function'){\n                    ret = renderer.render.call(this, qtiElement, data);\n                }else{\n                    //postRendering is optional, log missing call of postRender?\n                }\n            }\n\n            return ret;\n        };\n\n        this.setResponse = function(qtiInteraction, response, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.setResponse) === 'function'){\n                    ret = renderer.setResponse.call(this, qtiInteraction, response);\n                    var $container = renderer.getContainer.call(this, qtiInteraction);\n                    if($container instanceof $ && $container.length){\n                        $container.trigger('responseSet', [qtiInteraction, response]);\n                    }\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.getResponse = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.getResponse) === 'function'){\n                    ret = renderer.getResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.resetResponse = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.resetResponse) === 'function'){\n                    ret = renderer.resetResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.getLoadedRenderers = function(){\n            return _renderers;\n        };\n\n        this.register = function(renderersLocations){\n            _.extend(_locations, renderersLocations);\n        };\n\n        this.load = function(callback, requiredClasses){\n\n            var required = [];\n            if(requiredClasses){\n                if(_.isArray(requiredClasses)){\n\n                    //exclude abstract classes\n                    requiredClasses = _.intersection(requiredClasses, _renderableClasses);\n\n                    //add dependencies\n                    _.each(requiredClasses, function(reqClass){\n                        var deps = _dependencies[reqClass];\n                        if(deps){\n                            requiredClasses = _.union(requiredClasses, deps);\n                        }\n                    });\n\n                    for(var i in requiredClasses){\n                        var qtiClass = requiredClasses[i];\n                        if(_renderableSubclasses[qtiClass]){\n                            var requiredSubClasses = _.intersection(requiredClasses, _renderableSubclasses[qtiClass]);\n                            _.each(requiredSubClasses, function(subclass){\n                                if(_locations[qtiClass + '.' + subclass]){\n                                    required.push(_locations[qtiClass + '.' + subclass]);\n                                }else if(_locations[qtiClass]){\n                                    required.push(_locations[qtiClass]);\n                                }else{\n                                    throw new Error(this.name + ' : missing qti class location declaration: ' + qtiClass + ', subclass: ' + subclass);\n                                }\n                            });\n                        }else{\n                            if(_locations[qtiClass] === false){\n                                _renderers[qtiClass] = false;//mark this class as not renderable\n                            }else if(_locations[qtiClass]){\n                                required.push(_locations[qtiClass]);\n                            }else{\n                                throw new Error(this.name + ' : missing qti class location declaration: ' + qtiClass);\n                            }\n                        }\n                    }\n                }else{\n                    throw new Error('invalid argument type: expected array for arg \"requireClasses\"');\n                }\n            }else{\n                required = _.values(_locations);\n            }\n\n            var _this = this;\n            require(required, function(){\n\n                _.each(arguments, function(clazz){\n                    if(_isValidRenderer(clazz)){\n                        _renderers[clazz.qtiClass] = clazz;\n                    }\n                });\n\n                if(typeof (callback) === 'function'){\n                    callback.call(_this, _renderers);\n                }\n            });\n\n            return this;\n        };\n\n        this.setShuffledChoices = function(interaction, choices, identificationType){\n            if(Element.isA(interaction, 'interaction')){\n                this.shuffledChoices[interaction.getSerial()] = interactionHelper.findChoices(interaction, choices, identificationType);\n            }\n        };\n\n        this.getShuffledChoices = function(interaction, reshuffle, returnedType){\n            var ret = [], tmp;\n\n            if(Element.isA(interaction, 'interaction')){\n                var serial = interaction.getSerial();\n                if(!this.shuffledChoices[serial] || reshuffle){\n                    if(Element.isA(interaction, 'matchInteraction')){\n                        this.shuffledChoices[serial] = [];\n                        for(var i = 0; i < 2; i++){\n                            this.shuffledChoices[serial].push(interactionHelper.shuffleChoices(interaction.getChoices(i)))\n                        }\n                    }else{\n                        this.shuffledChoices[serial] = interactionHelper.shuffleChoices(interaction.getChoices());\n                    }\n                }\n                tmp = this.shuffledChoices[serial];\n\n                if(returnedType === 'serial' || returnedType === 'identifier'){\n                    ret = interactionHelper.convertChoices(tmp, returnedType);\n                }else{\n                    //pass value only, not ref\n                    ret = _.clone(tmp);\n                }\n            }\n\n            return ret;\n        };\n\n        this.getRenderers = function(){\n            return _renderers;\n        };\n\n        this.getLocations = function(){\n            return _locations;\n        };\n\n        this.getAbsoluteUrl = function(relUrl){\n            \n            //allow relative url outpu only if explicitely said so\n            if(this.getOption('userRelativeUrl')){\n                return relUrl.replace(/^\\.?\\//, '');\n            }\n            \n            if(/^http(s)?:\\/\\//i.test(relUrl)){\n                //already absolute\n                return relUrl;\n            }else{\n\n                var absUrl = '';\n                var runtimeLocations = this.getOption('runtimeLocations');\n\n                if(runtimeLocations && _.size(runtimeLocations)){\n                    _.forIn(runtimeLocations, function(runtimeLocation, typeIdentifier){\n                        if(relUrl.indexOf(typeIdentifier) === 0){\n                            absUrl = relUrl.replace(typeIdentifier, runtimeLocation);\n                            return false;//break\n                        }\n                    });\n                }\n\n                if(absUrl){\n                    return absUrl;\n                }else{\n                    var baseUrl = this.getOption('baseUrl') || getDocumentBaseUrl();\n                    return baseUrl + relUrl;\n                }\n\n            }\n        };\n    };\n\n    return {\n        build : function(renderersLocations, name, defaultOptions){\n            var NewRenderer = function(){\n                Renderer.apply(this, arguments);\n                this.register(renderersLocations);\n                this.name = name || '';\n                if(defaultOptions){\n                    this.setOptions(defaultOptions);\n                }\n            };\n            NewRenderer.prototype = Renderer.prototype;\n            return NewRenderer;\n        }\n    };\n});\n","define('taoQtiItem/qtiDefaultRenderer/renderers/config',[],function(){\n    return {\n        name : 'defaultRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiDefaultRenderer/renderers/Container',\n            'assessmentItem' : 'taoQtiItem/qtiDefaultRenderer/renderers/Item',\n            'stylesheet' : 'taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet',\n            'outcomeDeclaration' : 'taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration',\n            'responseDeclaration' : 'taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration',\n            'responseProcessing' : 'taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing',\n            'math' : 'taoQtiItem/qtiDefaultRenderer/renderers/Math',\n            'object' : 'taoQtiItem/qtiDefaultRenderer/renderers/Object',\n            'modalFeedback' : 'taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback',\n            'rubricBlock' : 'taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock',\n            'associateInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction',\n            'choiceInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction',\n            'extendedTextInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction',\n            'gapMatchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction',\n            'graphicAssociateInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction',\n            'graphicGapMatchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction',\n            'graphicOrderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction',\n            'hotspotInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction',\n            'hottextInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction',\n            'inlineChoiceInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction',\n            'matchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction',\n            'mediaInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction',\n            'orderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction',\n            'selectPointInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction',\n            'sliderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction',\n            'textEntryInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction',\n            'prompt' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt',\n            'associableHotspot' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot',\n            'gap' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap',\n            'gapImg' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg',\n            'gapText' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText',\n            'hotspotChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice',\n            'hottext' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext',\n            'inlineChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice',\n            'simpleAssociableChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice',\n            'simpleChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice'\n        }\n    }\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/config',['lodash', 'taoQtiItem/qtiDefaultRenderer/renderers/config'], function(_, defaultRenderConfig){\n    var locations = _.extend(_.clone(defaultRenderConfig.locations), {\n        'assessmentItem' : 'taoQtiItem/qtiCommonRenderer/renderers/Item',\n        '_container' : 'taoQtiItem/qtiCommonRenderer/renderers/Container',\n        '_simpleFeedbackRule' : false,\n        'stylesheet' : 'taoQtiItem/qtiCommonRenderer/renderers/Stylesheet',\n        'outcomeDeclaration' : 'taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration',\n        'responseDeclaration' : 'taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration',\n        'responseProcessing' : 'taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing',\n        'img' : 'taoQtiItem/qtiCommonRenderer/renderers/Img',\n        'math' : 'taoQtiItem/qtiCommonRenderer/renderers/Math',\n        'object' : 'taoQtiItem/qtiCommonRenderer/renderers/Object',\n        'rubricBlock' : 'taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',\n        'modalFeedback' : 'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n        'prompt' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt',\n        'choiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',\n        'simpleChoice.choiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',\n        'simpleChoice.orderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',\n        'hottext' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',\n        'gap' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',\n        'gapText' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',\n        'simpleAssociableChoice.matchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n        'simpleAssociableChoice.associateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n        'inlineChoice' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice',\n        'hottextInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n        'gapImg' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n        'customInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl'\n    });\n    return {\n        name:'commonRenderer',\n        locations : locations\n    };\n});\n\n\n\n\n\n","define('taoQtiItem/qtiCreator/renderers/config',['lodash', 'taoQtiItem/qtiCommonRenderer/renderers/config'], function(_, commonRenderConfig){\n\n    var locations = _.defaults({\n        '_container' : 'taoQtiItem/qtiCreator/renderers/Container',\n        'assessmentItem' : 'taoQtiItem/qtiCreator/renderers/Item',\n        'rubricBlock' : 'taoQtiItem/qtiCreator/renderers/RubricBlock',\n        'img' : 'taoQtiItem/qtiCreator/renderers/Img',\n        'math' : 'taoQtiItem/qtiCreator/renderers/Math',\n        'object' : 'taoQtiItem/qtiCreator/renderers/Object',\n        'modalFeedback' : 'taoQtiItem/qtiCreator/renderers/ModalFeedback',\n        'choiceInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction',\n        'simpleChoice.choiceInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction',\n        'simpleChoice.orderInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction',\n        'simpleAssociableChoice.associateInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n        'simpleAssociableChoice.matchInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction',\n        'customInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCreator/renderers/PortableInfoControl',\n        'gap' : 'taoQtiItem/qtiCreator/renderers/choices/Gap',\n        'gapText' : 'taoQtiItem/qtiCreator/renderers/choices/GapText',\n        'hottext' : 'taoQtiItem/qtiCreator/renderers/choices/Hottext'\n    }, commonRenderConfig.locations);\n\n    return {\n        name : 'creatorRenderer',\n        locations : locations\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoQtiItem/qtiCreator/renderers/config'], function(Renderer, config){\n    return Renderer.build(config.locations, config.name);\n});\n","define('taoQtiItem/qtiCreator/helper/creatorRenderer',[\n    'taoQtiItem/qtiCreator/renderers/Renderer',\n    'helpers',\n    'jquery',\n    'lodash',\n    'util/dom'\n], function(Renderer, helpers, $, _, dom){\n\n    //configure and instanciate once only:\n    var _creatorRenderer = null;\n    \n    /**\n     * Get a preconfigured renderer singleton\n     * \n     * @param {Boolean} reset\n     * @param {Object} config\n     * @returns {Object} - a configured instance of creatorRenderer\n     */\n    var get = function(reset, config){\n        if(!_creatorRenderer || reset){\n\n            var $bodyEltForm = _creatorRenderer ? _creatorRenderer.getOption('bodyElementOptionForm') : null;\n            var mediaSources = config.properties.mediaSources || [];\n            if(reset\n                || !$bodyEltForm\n                || !$bodyEltForm.length\n                || !dom.contains($bodyEltForm)){\n\n                _creatorRenderer = new Renderer({\n                    baseUrl : '',\n                    lang : '',\n                    uri : '',\n                    shuffleChoices : false,\n                    itemOptionForm : $('#item-editor-item-property-bar .panel'),\n                    interactionOptionForm : $('#item-editor-interaction-property-bar .panel'),\n                    choiceOptionForm : $('#item-editor-choice-property-bar .panel'),\n                    responseOptionForm : $('#item-editor-response-property-bar .panel'),\n                    bodyElementOptionForm : $('#item-editor-body-element-property-bar .panel'),\n                    textOptionForm : $('#item-editor-text-property-bar .panel'),\n                    modalFeedbackOptionForm : $('#item-editor-modal-feedback-property-bar .panel'),\n                    mediaManager : {\n                        appendContainer : '#mediaManager',\n                        browseUrl : helpers._url('files', 'ItemContent', 'taoItems'),\n                        uploadUrl : helpers._url('upload', 'ItemContent', 'taoItems'),\n                        deleteUrl : helpers._url('delete', 'ItemContent', 'taoItems'),\n                        downloadUrl : helpers._url('download', 'ItemContent', 'taoItems'),\n                        fileExistsUrl : helpers._url('fileExists', 'ItemContent', 'taoItems'),\n                        mediaSources : mediaSources\n                    }\n                });\n\n            }\n        }\n\n        return _creatorRenderer;\n    };\n\n\n    return {\n        get : function(reset, config){\n            return get(reset, config);\n        },\n        setOption : function(name, value){\n            return get().setOption(name, value);\n        },\n        setOptions : function(options){\n            return get().setOptions(options);\n        },\n        load : function(qtiClasses, done){\n            return get().load(function(){\n                if(_.isFunction(done)){\n                    done.apply(this, arguments);\n                }\n            }, qtiClasses);\n        }\n    };\n\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/config',[],function(){\n    return {\n        name : 'xmlRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiXmlRenderer/renderers/Container',\n            'assessmentItem' : 'taoQtiItem/qtiXmlRenderer/renderers/Item',\n            'stylesheet' : 'taoQtiItem/qtiXmlRenderer/renderers/Stylesheet',\n            'responseDeclaration' : 'taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration',\n            'outcomeDeclaration' : 'taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration',\n            'responseProcessing' : 'taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing',\n            '_simpleFeedbackRule' : 'taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule',\n            'math' : 'taoQtiItem/qtiXmlRenderer/renderers/Math',\n            'img' : 'taoQtiItem/qtiXmlRenderer/renderers/Img',\n            'object' : 'taoQtiItem/qtiXmlRenderer/renderers/Object',\n            'modalFeedback' : 'taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback',\n            'rubricBlock' : 'taoQtiItem/qtiXmlRenderer/renderers/RubricBlock',\n            'associateInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction',\n            'choiceInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction',\n            'extendedTextInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction',\n            'gapMatchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction',\n            'graphicAssociateInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction',\n            'graphicGapMatchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction',\n            'graphicOrderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction',\n            'hotspotInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction',\n            'hottextInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction',\n            'inlineChoiceInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction',\n            'matchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction',\n            'mediaInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction',\n            'orderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction',\n            'selectPointInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction',\n            'sliderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction',\n            'textEntryInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction',\n            'uploadInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction',\n            'prompt' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt',\n            'associableHotspot' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot',\n            'gap' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/Gap',\n            'gapImg' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg',\n            'gapText' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/GapText',\n            'hotspotChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice',\n            'hottext' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext',\n            'inlineChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice',\n            'simpleAssociableChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice',\n            'simpleChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice',\n            'customInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/PortableCustomInteraction',\n            'infoControl' : 'taoQtiItem/qtiXmlRenderer/renderers/PortableInfoControl'\n        },\n        options : {\n            userRelativeUrl : true\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoQtiItem/qtiXmlRenderer/renderers/config'], function(Renderer, config){\n    return Renderer.build(config.locations, config.name, config.options);\n});\n","//@todo : move this to the ../helper directory\ndefine('taoQtiItem/qtiItem/core/Loader',['lodash', 'class', 'taoQtiItem/qtiItem/core/qtiClasses', 'taoQtiItem/qtiItem/core/Element'], function(_, Class, qtiClasses, Element){\n\n    var Loader = Class.extend({\n        init : function(item, classesLocation){\n\n            this.qti = {}; //loaded qti classes are store here\n            this.classesLocation = {};\n\n            this.item = item || null;//starts either from scratch or with an existing item object\n            this.setClassesLocation(classesLocation || qtiClasses);//load default location for qti classes model\n        },\n        setClassesLocation : function(qtiClasses){\n            _.extend(this.classesLocation, qtiClasses);\n            return this;\n        },\n        getRequiredClasses : function(data){\n            var ret = [];\n            for(var i in data){\n                if(i === 'qtiClass' && data[i] !== '_container' && i !== 'relatedItem'){//although a _container is a concrete class in TAO, it is not defined in QTI standard\n                    ret.push(data[i]);\n                }else if(typeof(data[i]) === 'object'){\n                    ret = _.union(ret, this.getRequiredClasses(data[i]));\n                }\n            }\n            return ret;\n        },\n        loadRequiredClasses : function(data, callback, reload){\n\n            var requiredClasses = this.getRequiredClasses(data, reload), required = [];\n\n            for(var i in requiredClasses){\n                var requiredClass = requiredClasses[i];\n                if(this.classesLocation[requiredClass]){\n                    required.push(this.classesLocation[requiredClass]);\n                }else{\n                    throw new Error('missing qti class location declaration : ' + requiredClass);\n                }\n            }\n\n            var _this = this;\n            require(required, function(){\n                _.each(arguments, function(QtiClass){\n                    _this.qti[QtiClass.prototype.qtiClass] = QtiClass;\n                });\n                callback.call(_this, _this.qti);\n            });\n        },\n        getLoadedClasses : function(){\n            return _.keys(this.qti);\n        },\n        loadItemData : function(data, callback){\n\n            var _this = this;\n            _this.loadRequiredClasses(data, function(Qti){\n\n                if(typeof(data) === 'object' && data.qtiClass === 'assessmentItem'){\n                    _this.item = new Qti.assessmentItem(data.serial, data.attributes || {});\n                    _this.loadContainer(_this.item.getBody(), data.body);\n\n                    for(var i in data.outcomes){\n                        var outcome = _this.buildOutcome(data.outcomes[i]);\n                        if(outcome){\n                            _this.item.addOutcomeDeclaration(outcome);\n                        }\n                    }\n                    for(var i in data.feedbacks){\n                        var feedback = _this.buildElement(data.feedbacks[i]);\n                        if(feedback){\n                            _this.item.addModalFeedback(feedback);\n                        }\n                    }\n                    for(var i in data.stylesheets){\n                        var stylesheet = _this.buildElement(data.stylesheets[i]);\n                        if(stylesheet){\n                            _this.item.addStylesheet(stylesheet);\n                        }\n                    }\n\n                    //important : build responses after all modal feedbacks and outcomes has been loaded, because the simple feedback rules need to reference them\n                    for(var i in data.responses){\n                        var response = _this.buildResponse(data.responses[i]);\n                        if(response){\n                            _this.item.addResponseDeclaration(response);\n\n                            var feedbackRules = data.responses[i].feedbackRules;\n                            if(feedbackRules){\n                                _.forIn(feedbackRules, function(fbData, serial){\n                                    response.feedbackRules[serial] = _this.buildSimpleFeedbackRule(fbData);\n                                });\n                            }\n                        }\n                    }\n\n                    if(data.responseProcessing){\n                        _this.item.setResponseProcessing(_this.buildResponseProcessing(data.responseProcessing));\n                    }\n                    _this.item.setNamespaces(data.namespaces);\n                }\n\n                if(typeof(callback) === 'function'){\n                    callback.call(_this, _this.item);\n                }\n            });\n        },\n        loadElement : function(data, callback){\n\n            var _this = this;\n\n            _this.loadRequiredClasses(data, function(Qti){\n\n                var element = _this.buildElement(data);\n\n                if(typeof(callback) === 'function'){\n                    callback.call(_this, element);\n                }\n            });\n        },\n        /**\n         * Load ALL given elements into existing loaded item \n         * \n         * @todo to be renamed to loadItemElements\n         * @param {object} data\n         * @param {function} callback\n         * @returns {undefined}\n         */\n        loadElements : function(data, callback){\n\n            var _this = this;\n\n            if(_this.item){\n\n                this.loadRequiredClasses(data, function(){\n\n                    var allElements = _this.item.getComposingElements();\n\n                    for(var i in data){\n                        var elementData = data[i];\n                        if(elementData && elementData.qtiClass && elementData.serial){\n                            //find and update element\n                            if(allElements[elementData.serial]){\n                                _this.loadElementData(allElements[elementData.serial], elementData);\n                            }\n                        }\n                    }\n\n                    if(typeof(callback) === 'function'){\n                        callback.call(_this, _this.item);\n                    }\n                });\n            }else{\n                throw 'QtiLoader : cannot load elements in empty item';\n            }\n\n        },\n        buildResponse : function(data){\n\n            var response = this.buildElement(data);\n\n            response.template = data.howMatch || null;\n            response.defaultValue = data.defaultValue || null;\n            response.correctResponse = data.correctResponses || null;\n\n            if(_.size(data.mapping)){\n                response.mapEntries = data.mapping;\n            }else if(_.size(data.areaMapping)){\n                response.mapEntries = data.areaMapping;\n            }else{\n                response.mapEntries = {};\n            }\n\n            response.mappingAttributes = data.mappingAttributes || {};\n\n            return response;\n        },\n        buildSimpleFeedbackRule : function(data){\n\n            var feedbackRule = this.buildElement(data);\n\n            if(data.condition){\n                feedbackRule.condition = data.condition;\n            }\n            if(data.comparedValue){\n                feedbackRule.comparedValue = data.comparedValue;\n            }\n\n            feedbackRule.comparedOutcome = this.item.responses[data.comparedOutcome] || null;\n            feedbackRule.feedbackOutcome = this.item.outcomes[data.feedbackOutcome] || null;\n            feedbackRule.feedbackThen = this.item.modalFeedbacks[data.feedbackThen] || null;\n            feedbackRule.feedbackElse = this.item.modalFeedbacks[data.feedbackElse] || null;\n\n            return feedbackRule;\n        },\n        buildOutcome : function(data){\n            var outcome = this.buildElement(data);\n            outcome.defaultValue = data.defaultValue || null;\n            return outcome;\n        },\n        buildResponseProcessing : function(data){\n            var rp = this.buildElement(data);\n            if(data && data.processingType){\n                if(data.processingType === 'custom'){\n                    rp.xml = data.data;\n                    rp.processingType = 'custom';\n                }else{\n                    rp.processingType = 'templateDriven';\n                }\n            }\n            return rp;\n        },\n        loadContainer : function(bodyObject, bodyData){\n            if(!Element.isA(bodyObject, '_container')){\n                throw 'bodyObject must be a QTI Container';\n            }\n\n            if(bodyData && typeof bodyData.body === 'string' && (typeof bodyData.elements === 'array' || typeof bodyData.elements === 'object')){\n                for(var serial in bodyData.elements){\n                    var eltData = bodyData.elements[serial];\n                    //check if class is loaded:\n                    var element = this.buildElement(eltData);\n                    if(element){\n                        bodyObject.setElement(element, bodyData.body);\n                    }\n                }\n                bodyObject.body(bodyData.body);\n            }else{\n                throw 'wrong bodydata format';\n            }\n        },\n        buildElement : function(elementData){\n            var elt = null;\n            if(elementData && elementData.qtiClass && elementData.serial){\n                var className = elementData.qtiClass;\n                if(this.qti[className]){\n                    elt = new this.qti[className](elementData.serial);\n                    this.loadElementData(elt, elementData);\n                }else{\n                    throw 'the qti element class does not exist: ' + className;\n                }\n            }else{\n                throw 'wrong elementData format';\n            }\n            return elt;\n        },\n        loadElementData : function(element, data){\n\n            element.setAttributes(_.clone(data.attributes) || {});\n\n            if(element.body && data.body){\n                if(element.bdy){\n                    this.loadContainer(element.getBody(), data.body);\n                }\n            }\n\n            if(element.object && data.object){\n                if(element.object){\n                    this.loadObjectData(element.object, data.object);\n                }\n            }\n\n            if(Element.isA(element, 'interaction')){\n                this.loadInteractionData(element, data);\n            }else if(Element.isA(element, 'choice')){\n                this.loadChoiceData(element, data);\n            }else if(Element.isA(element, 'math')){\n                this.loadMathData(element, data);\n            }else if(Element.isA(element, 'infoControl')){\n                this.loadPicData(element, data);\n            }\n\n            return element;\n        },\n        loadInteractionData : function(interaction, data){\n            if(Element.isA(interaction, 'blockInteraction')){\n                if(data.prompt){\n                    this.loadContainer(interaction.prompt.getBody(), data.prompt);\n                }\n            }\n\n            this.buildInteractionChoices(interaction, data);\n\n            if(Element.isA(interaction, 'customInteraction')){\n                this.loadPciData(interaction, data);\n            }\n        },\n        buildInteractionChoices : function(interaction, data){\n\n            //note: Qti.ContainerInteraction (Qti.GapMatchInteraction and Qti.HottextInteraction) has already been parsed by builtElement(interacionData);\n            if(data.choices){\n                if(Element.isA(interaction, 'matchInteraction')){\n                    for(var set = 0; set < 2; set++){\n                        if(!data.choices[set]){\n                            throw 'missing match set #' + set;\n                        }\n                        var matchSet = data.choices[set];\n                        for(var serial in matchSet){\n                            var choice = this.buildElement(matchSet[serial]);\n                            if(choice){\n                                interaction.addChoice(choice, set);\n                            }\n                        }\n                    }\n                }else{\n                    for(var serial in data.choices){\n                        var choice = this.buildElement(data.choices[serial]);\n                        if(choice){\n                            interaction.addChoice(choice);\n                        }\n                    }\n                }\n\n                if(Element.isA(interaction, 'graphicGapMatchInteraction')){\n                    if(data.gapImgs){\n                        for(var serial in data.gapImgs){\n                            var gapImg = this.buildElement(data.gapImgs[serial]);\n                            if(gapImg){\n                                interaction.addGapImg(gapImg);\n                            }\n                        }\n                    }\n                }\n\n            }\n\n        },\n        loadChoiceData : function(choice, data){\n            if(Element.isA(choice, 'textVariableChoice')){\n                choice.val(data.text);\n            }else if(Element.isA(choice, 'gapImg')){\n                //has already been taken care of in buildElement()\n            }else if(Element.isA(choice, 'containerChoice')){\n                //has already been taken care of in buildElement()\n            }\n        },\n        loadObjectData : function(object, data){\n            object.setAttributes(data.attributes);\n            //@todo: manage object like a container\n            if(data._alt){\n                if(data._alt.qtiClass === 'object'){\n                    object._alt = Loader.buildElement(data._alt);\n                }else{\n                    object._alt = data._alt;\n                }\n            }\n        },\n        loadMathData : function(math, data){\n            math.ns = data.ns || {};\n            math.setMathML(data.mathML || '');\n            math.annotations = data.annotations || {};\n        },\n        loadPciData : function(pci, data){\n            loadPortableCustomElementData(pci, data);\n        },\n        loadPicData : function(pic, data){\n            loadPortableCustomElementData(pic, data);\n        }\n    });\n    \n    function loadPortableCustomElementData(portableElement, data){\n        portableElement.typeIdentifier = data.typeIdentifier;\n        portableElement.markup = data.markup;\n        portableElement.entryPoint = data.entryPoint;\n        portableElement.properties = data.properties;\n        portableElement.libraries = data.libraries;\n    }\n    \n    return Loader;\n});\n","define('taoQtiItem/qtiCreator/helper/simpleParser',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiItem/core/Loader'\n], function(_, $, util, Loader){\n\n    var _parsableElements = ['img', 'object'];\n    var _qtiClassNames = {\n        rubricblock : 'rubricBlock'\n    };\n\n    var _defaultOptions = {\n        ns : {\n            math : ''\n        },\n        loaded : null,\n        model : null\n    };\n\n    function _getElementSelector(qtiClass, ns){\n        return ns ? ns + \"\\\\:\" + qtiClass + ','+qtiClass : qtiClass;\n    }\n\n    function getQtiClassFromXmlDom($node){\n\n        var qtiClass = $node.prop('tagName').toLowerCase();\n\n        //remove ns : \n        qtiClass = qtiClass.replace(/.*:/, '');\n\n        return _qtiClassNames[qtiClass] ? _qtiClassNames[qtiClass] : qtiClass;\n    }\n\n    function buildElement($elt){\n\n        var qtiClass = getQtiClassFromXmlDom($elt);\n\n        var elt = {\n            qtiClass : qtiClass,\n            serial : util.buildSerial(qtiClass + '_'),\n            attributes : {}\n        };\n\n        $.each($elt[0].attributes, function(){\n            if(this.specified){\n                elt.attributes[this.name] = this.value;\n            }\n        });\n\n        return elt;\n    }\n\n    function buildMath($elt, options){\n\n        var elt = buildElement($elt);\n\n        //set annotations:\n        elt.annotations = {};\n        $elt.find(_getElementSelector('annotation', options.ns.math)).each(function(){\n            var $annotation = $(this);\n            var encoding = $annotation.attr('encoding');\n            if(encoding){\n                elt.annotations[encoding] = $annotation.html();\n            }\n            $annotation.remove();\n        });\n        \n        //set math xml\n        elt.mathML = $elt.html();\n        \n        //set ns: \n        elt.ns = {\n            name : 'm',\n            uri : 'http://www.w3.org/1998/Math/MathML'//@todo : remove hardcoding there\n        };\n\n        return elt;\n    }\n\n    function parseContainer($container, opts){\n\n        var options = _.merge(_.clone(_defaultOptions), opts || {});\n\n        var ret = {\n            serial : util.buildSerial('_container_'),\n            body : '',\n            elements : {}\n        };\n\n        _.each(_parsableElements, function(qtiClass){\n\n            $container.find(qtiClass).each(function(){\n\n                var $qtiElement = $(this);\n                var element = buildElement($qtiElement, opts);\n\n                ret.elements[element.serial] = element;\n                $qtiElement.replaceWith(_placeholder(element));\n\n            });\n\n        });\n        \n        $container.find(_getElementSelector('math', options.ns.math)).each(function(){\n\n            var $qtiElement = $(this);\n            var element = buildMath($qtiElement, opts);\n\n            ret.elements[element.serial] = element;\n            $qtiElement.replaceWith(_placeholder(element));\n\n        });\n\n        ret.body = $container.html();\n\n        return ret;\n    }\n\n    function _placeholder(element){\n        return '{{' + element.serial + '}}';\n    }\n\n    var parser = {\n        parse : function(xmlStr, options){\n\n            var $container = $(xmlStr);\n\n            var element = buildElement($container, options);\n\n            var data = parseContainer($container, options);\n\n            if(data.body !== undefined){\n                element.body = data;\n            }\n\n            if(_.isFunction(options.loaded) && options.model){\n                var loader = new Loader().setClassesLocation(options.model);\n                loader.loadElement(element, options.loaded);\n            }\n\n            return element;\n        }\n    };\n\n    return parser;\n});\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n * FIXME There is a strong dependency to the QtiItem extension, due to the reuse of the QTI Editor for the rubricblock. \n */\ndefine('taoQtiTest/controller/creator/views/rubricblock',[\n    'jquery',\n    'lodash',\n    'taoQtiTest/controller/creator/views/actions',\n    'taoQtiItem/qtiCreator/model/qtiClasses',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiXmlRenderer/renderers/Renderer',\n    'taoQtiItem/qtiCreator/helper/simpleParser',\n    'helpers'\n], function($, _, actions, qtiClasses, creatorRenderer, XmlRenderer, simpleParser, helpers){\n    'use strict';\n\n    /**\n     * Set up a rubric block: init action beahviors. Called for each one.\n     *\n     * @param {jQueryElement} $rubricBlock - the rubricblock to set up\n     */\n    var setUp = function setUp($rubricBlock, model, data){\n        \n        actions.properties($rubricBlock, 'rubricblock', model, propHandler);\n        setUpEditor();\n\n        $('formatting-toggler', $rubricBlock).click(function(){\n\n            $rubricBlock.find('.cke_editable').focus().click();\n        });\n\n        /**\n         * Perform some binding once the property view is create\n         * @private\n         * @param {propView} propView - the view object\n         */\n        function propHandler(propView){\n\n            rbViews(propView.getView());\n\n            $rubricBlock.parents('.testpart').on('delete', removePropHandler);\n            $rubricBlock.parents('.section').on('delete', removePropHandler);\n            $rubricBlock.on('delete', removePropHandler);\n\n            function removePropHandler(e){\n                if(propView !== null){\n                    propView.destroy();\n                }\n            }\n        }\n\n        /**\n         * Set up the views select box\n         * @private\n         * @param {jQuerElement} $propContainer - the element container\n         */\n        function rbViews($propContainer){\n            var $select = $('select', $propContainer);\n\n            $select.select2({\n                'width' : '100%'\n            }).on(\"select2-removed\", function(e){\n                if($select.select2('val').length === 0){\n                    $select.select2('val', [1]);\n                }\n            });\n\n            if($select.select2('val').length === 0){\n                $select.select2('val', [1]);\n            }\n        }\n\n        function setUpEditor(){\n\n            var mathNs = 'm';//for 'http://www.w3.org/1998/Math/MathML'\n            var $rubricBlockBinding = $('.rubricblock-binding', $rubricBlock);\n            var $rubricBlockContent = $('.rubricblock-content', $rubricBlock);\n            var $editorForm = $('<div class=\"rubricblock-formatting-props props clearfix\">');\n               //uncomment to manage images\n               $editorForm.appendTo('.test-creator-props').hide();\n            var fakeXml = '<rubricBlock>' + $rubricBlockBinding.html() + '</rubrickBlock>';\n\n            var xmlRenderer = new XmlRenderer({shuffleChoices : false}).load();\n\n            //parse xml\n            simpleParser.parse(fakeXml, {\n                ns : {\n                    math : mathNs\n                },\n                model : qtiClasses,\n                loaded : function(rubricBlock){\n\n                    var uri = data.uri, lang = 'en-US';\n                    \n                    creatorRenderer.setOptions({\n                        uri : uri,\n                        lang : lang,\n                        baseUrl : helpers._url('download', 'TestContent', 'taoQtiTest', {uri : uri, lan : lang, path : ''}),\n                        interactionOptionForm : $(),\n                        choiceOptionForm : $(),\n                        responseOptionForm : $(),\n                        bodyElementOptionForm : $editorForm,\n                        itemOptionForm : $(),\n                        textOptionForm : $(),\n                        mediaManager : {\n                            appendContainer : '#test-creator',\n                            browseUrl : helpers._url('files', 'TestContent', 'taoQtiTest'),\n                            uploadUrl : helpers._url('upload', 'TestContent', 'taoQtiTest'),\n                            deleteUrl : helpers._url('delete', 'TestContent', 'taoQtiTest'),\n                            downloadUrl : helpers._url('download', 'TestContent', 'taoQtiTest')\n                        }\n                    });\n\n                    creatorRenderer.get().load(function(){\n\n                        var syncRubricBlockContent = _.throttle(function(){\n                             $rubricBlockBinding\n                                .html($(rubricBlock.render(xmlRenderer)).html())\n                                .trigger('change');\n                        }, 500);\n\n                        rubricBlock.setRenderer(this);\n                        $rubricBlockContent.html(rubricBlock.render());\n                        var widget = rubricBlock.postRender({\n                            ready : function(){\n                                this.changeState('active');\n                            }\n                        });\n\n                        //disable some elements that are not yet ready or not useful   \n                        $('.mini-tlb [data-role=\"delete\"]', $rubricBlockContent).remove();\n                        $rubricBlockContent.on('editorready', function(){\n                            //comment to manage images\n                            $('.cke_button__taoqtiimage').remove();\n                            $('.cke_button__taoqtimaths').remove();\n                        });\n\n                        widget.on('containerBodyChange', function(data){\n                            if(data.container.serial === rubricBlock.getBody().serial){\n                                syncRubricBlockContent();\n                            }\n\n                        }, true);\n\n                    }, this.getLoadedClasses());\n                }\n            });\n        }\n    };\n\n    /**\n     * The rubriclockView setup RB related components and beahvior\n     * \n     * @exports taoQtiTest/controller/creator/views/rubricblock\n     */\n    return {\n        setUp : setUp\n    };\n\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/helpers/qtiTest',['lodash', 'i18n'], function(_, __){\n    'use strict';\n\n    /**\n     * Utils to manage the QTI Test model \n     * @exports taoQtiTest/controller/creator/qtiTestHelper\n     */\n    var qtiTestHelper = {\n\n        /**\n         * Extract qti identifiers from a model\n         * @param {Object} obj - the model to extract id from\n         * @returns {Array} the extracted identifiers\n         */       \n        extractIdentifiers : function(obj){\n            var self = this;\n            var identifiers = [];\n            if(_.has(obj, 'identifier')){\n                identifiers = identifiers.concat(obj.identifier.toLowerCase());\n            } \n            _.flatten(_.forEach(obj, function(value) {\n                identifiers = identifiers.concat(typeof value === \"object\" ? self.extractIdentifiers(value) : []);\n            }), true);\n            return identifiers;\n        },\n\n        /**\n         * Get a valid and avialable qti identifier\n         * @param {String} qtiType - the type of element you want an id for\n         * @param {Array} lockedIdentifiers - the list of identifiers you cannot use anymore\n         * @returns {String} the identifier\n         */       \n        getIdentifier : function(qtiType, lockedIdentifiers){\n            var index = 1;\n            var suggestion;\n            var glue =  '-';\n            \n            do {\n                suggestion = qtiType +  glue + (index++);\n            } while(_.contains(lockedIdentifiers, suggestion.toLowerCase()));\n\n            lockedIdentifiers.push(suggestion.toLowerCase());\n\n            return suggestion;\n        },\n\n        /**\n         * Gives you a validator that check QTI id format\n         * @returns {Object} the validator\n         */\n        idFormatValidator : function(){\n            var qtiIdPattern = /^[_a-zA-Z]{1}[a-zA-Z0-9\\-._]{0,31}$/i;\n            return {\n                name : 'testIdFormat',\n                message : __('is not a valid identifier (alphanum, underscore, dash and dots.)'),\n                validate : function(value, callback){\n                    if(typeof callback === 'function'){\n                        callback(qtiIdPattern.test(value));\n                    } \n                }\n            };\n        },\n\n        \n        /**\n         * Gives you a validator that check if a QTI id is available\n         * @param {Array} lockedIdentifiers - the list of identifiers you cannot use anymore\n         * @returns {Object} the validator\n         */\n        idAvailableValidator : function(lockedIdentifiers){\n            return {\n                name : 'testIdAvailable',\n                message : __('is already used in the test.'),\n                validate : function(value, callback, options){\n                    if(typeof callback === 'function'){\n                        callback(!_.contains(_.values(lockedIdentifiers), value.toLowerCase()) || (options.original && value === options.original));\n                    } \n                }\n            };\n        },\n \n        /**\n         * Does the value contains the type type\n         * @param {Object} value \n         * @param {string} type\n         * @returns {boolean} \n         */\n        filterQtiType : function (value, type){\n             return value['qti-type'] && value['qti-type'] === type;\n        },\n    \n        /**\n         * Add the 'qti-type' properties to object that miss it, using the parent key name\n         * @param {Object|Array} collection\n         * @param {string} parentType\n         */\n        addMissingQtiType : function (collection, parentType) {\n              var self = this;\n              _.forEach(collection, function(value, key) {\n                if (_.isObject(value) && !_.isArray(value) && !_.has(value, 'qti-type')) {\n                    if (_.isNumber(key)) {\n                        if (parentType) {\n                            value['qti-type'] = parentType;\n                        }\n                    } else {\n                        value['qti-type'] = key;\n                    }\n                }\n                if (_.isArray(value)) {\n                    self.addMissingQtiType(value, key.replace(/s$/, ''));\n                } else if (_.isObject(value)) {\n                   self.addMissingQtiType(value);\n                }\n            });\n        },\n    \n        /**\n         * Applies consolidation rules to the model\n         * @param {Object} model\n         * @returns {Object}\n         */\n        consolidateModel : function(model){\n            if(model && model.testParts && _.isArray(model.testParts) && model.testParts[0]){\n                var testPart = model.testParts[0];\n                if(testPart.assessmentSections && _.isArray(testPart.assessmentSections)){\n                     _.forEach(testPart.assessmentSections, function(assessmentSection, key) {\n                         \n                         //remove ordering is shuffle is false\n                         if(assessmentSection.ordering && \n                                 assessmentSection.ordering.shuffle !== undefined && assessmentSection.ordering.shuffle === false){\n                             delete assessmentSection.ordering;\n                         }\n\n                          if(assessmentSection.rubricBlocks && _.isArray(assessmentSection.rubricBlocks)) {\n\n                              //remove rubrick blocks if empty\n                              if (assessmentSection.rubricBlocks.length === 0 || \n                                      (assessmentSection.rubricBlocks.length === 1 && assessmentSection.rubricBlocks[0].content.length === 0) ) {\n                                  \n                                  delete assessmentSection.rubricBlocks;\n                              }\n                              //ensure the view attribute is present\n                              else if(assessmentSection.rubricBlocks.length > 0){\n                                _.forEach(assessmentSection.rubricBlocks, function(rubricBlock){\n                                        rubricBlock.views = ['candidate'];\n                                        //change once views are supported\n                                        //if(rubricBlock && rubricBlock.content && (!rubricBlock.views || (_.isArray(rubricBlock.views) && rubricBlock.views.length === 0))){\n                                            //rubricBlock.views = ['candidate'];\n                                        //}\n                                  });\n                              }\n                        }\n                     });\n                }\n            }\n            return model;\n        }\n    };\n\n    return  qtiTestHelper;\n});\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/section',[\n    'jquery', 'lodash', 'uri', \n    'taoQtiTest/controller/creator/views/actions',\n    'taoQtiTest/controller/creator/views/itemref',\n    'taoQtiTest/controller/creator/views/rubricblock',\n    'taoQtiTest/controller/creator/templates/index', \n    'taoQtiTest/controller/creator/helpers/qtiTest'\n],\nfunction($, _, uri, actions, itemRefView, rubricBlockView, templates, qtiTestHelper){\n    'use strict';\n        \n   /**\n    * Set up a section: init action beahviors. Called for each section.\n    *\n    * @param {jQueryElement} $sectuin - the section to set up\n    * @param {Object} model - the data model to bind to the test part\n    * @param {Object} [data] - additionnal data used by the setup\n    * @param {Array} [data.identifiers] - the locked identifiers\n    */\n   var setUp = function setUp ($section, model, data){\n\n        var $actionContainer = $('h2', $section);\n\n        \n        actions.properties($actionContainer, 'section', model, propHandler);\n        actions.move($actionContainer, 'sections', 'section');\n        itemRefs();\n        acceptItemRefs();\n        rubricBlocks();\n        addRubricBlock();\n\n        //trigger for the case the section is added an a selection is ongoing\n\n\n        /**\n         *  Perform some binding once the property view is create\n         *  @param {propView} propView - the view object\n         */\n        function propHandler (propView) {\n\n            var $view = propView.getView();\n\n           //enable/disable selection\n           var $selectionSwitcher = $('[name=section-enable-selection]', $view);\n           var $selectionSelect = $('[name=section-select]', $view);\n           var $selectionWithRep = $('[name=section-with-replacement]', $view);\n\n           var switchSelection = function switchSelection(){\n                if($selectionSwitcher.prop('checked') === true){\n                   $selectionSelect.incrementer('enable');\n                   $selectionWithRep.removeClass('disabled');\n                } else {\n                   $selectionSelect.incrementer('disable');\n                   $selectionWithRep.addClass('disabled');\n                }\n           };\n           $selectionSwitcher.on('change', switchSelection);\n           $selectionSwitcher.on('change', function updateModel(){\n                if(!$selectionSwitcher.prop('checked')){\n                    $selectionSelect.val(0);\n                    $selectionWithRep.prop('checked', false);\n                    delete model.selection;\n                }\n           });\n\n           $selectionSwitcher.prop('checked', !!model.selection).trigger('change');\n\n           //listen for databinder change to update the test part title\n           var $title =  $('[data-bind=title]', $section);\n           $view.on('change.binder', function(e, model){\n                if(e.namespace === 'binder' && model['qti-type'] === 'assessmentSection'){\n                    $title.text(model.title);\n                }\n            });\n\n            $section.parents('.testpart').on('deleted.deleter', removePropHandler);\n            $section.on('deleted.deleter', removePropHandler);\n            \n            function removePropHandler(){\n                if(propView !== null){\n                    propView.destroy();\n                }\n            }\n        }\n\n        /**\n         * Set up the item refs that already belongs to the section\n         * @private\n         */\n        function itemRefs(){\n            \n            if(!model.sectionParts){\n                model.sectionParts = [];\n            }                   \n            $('.itemref', $section).each(function(){\n                var $itemRef = $(this);\n                var index = $itemRef.data('bind-index');\n                if(!model.sectionParts[index]){\n                    model.sectionParts[index] = {};\n                }\n\n                itemRefView.setUp($itemRef, model.sectionParts[index]);\n                $itemRef.find('.title').text(\n                    data.labels[uri.encode($itemRef.data('uri'))]\n                );\n            });\n        }\n\n        /**\n         * Make the section to accept the selected items\n         * @private\n         */\n        function acceptItemRefs(){\n            var $selected;\n            var $items     = $('.test-creator-items'); \n            \n             //the item selector trigger a select event \n             $items.on('itemselect.creator', function(e){\n                var selection = Array.prototype.slice.call(arguments, 1);\n                var $placeholder = $('.itemref-placeholder', $section);\n                var $placeholders = $('.itemref-placeholder');\n \n                if(selection.length > 0){\n                    $placeholder.show().off('click').on('click', function(e){\n\n                        _.forEach(selection, function(item){\n                            var $item = $(item);\n                            \n                            addItemRef($('.itemrefs', $section), undefined, {\n                                href        : uri.decode($item.data('uri')),\n                                label       : $.trim($item.clone().children().remove().end().text()),\n                                'qti-type'  : 'assessmentItemRef'\n                            });\n                        }); \n\n                        //reset the current selection\n                        $('.ui-selected', $items).removeClass('ui-selected').removeClass('selected');\n                        $placeholders.hide().off('click');\n                    });    \n                } else {\n                    $placeholders.hide().off('click');\n                }\n             });\n\n\n            //we listen the event not from the adder but  from the data binder to be sure the model is up to date\n            $(document)\n              .off('add.binder', '#' + $section.attr('id') + ' .itemrefs')\n              .on('add.binder', '#' + $section.attr('id') + ' .itemrefs', function(e, $itemRef){\n                if(e.namespace === 'binder' && $itemRef.hasClass('itemref')){\n                    var index = $itemRef.data('bind-index'); \n\n                    //initialize the new item ref\n                    itemRefView.setUp($itemRef, model.sectionParts[index]);\n                } \n            });\n\n            //on set up, if there is a selection ongoing, we trigger the event\n            $selected = $('.selected', $items); \n            if($selected.length > 0){\n                $items.trigger('itemselect.creator', $selected);\n            }\n\n        }\n\n        /**\n         * Add a new item ref to the section\n         * @param {jQueryElement} $refList - the element to add the item to\n         * @param {Number} [index] - the position of the item to add\n         * @param {Object} [itemData] - the data to bind to the new item ref\n         */\n        function addItemRef($refList, index, itemData){\n           var $itemRef;\n           var $items = $refList.children('li');\n           index = index || $items.length;\n           itemData.identifier = qtiTestHelper.getIdentifier('item', data.identifiers);\n           itemData.index = index + 1;\n           $itemRef = $(templates.itemref(itemData));\n           if(index > 0){\n               $itemRef.insertAfter($items.eq(index - 1));\n           } else {\n               $itemRef.appendTo($refList); \n           }\n           $refList.trigger('add', [$itemRef, itemData]);\n        }\n\n\n        /**\n         * Set up the rubric blocks that already belongs to the section\n         * @private\n         */\n        function rubricBlocks () {\n            if(!model.rubricBlocks){\n                model.rubricBlocks = [];\n            }                   \n            $('.rubricblock', $section).each(function(){\n                var $rubricBlock = $(this);\n                var index = $rubricBlock.data('bind-index');\n                if(!model.rubricBlocks[index]){\n                    model.rubricBlocks[index] = {};\n                }\n\n                rubricBlockView.setUp($rubricBlock, model.rubricBlocks[index], data);\n            });\n        }\n\n        /**\n         * Enable to add new rubrick block\n         * @private\n         */\n        function addRubricBlock () {\n\n            $('.rublock-adder', $section).adder({\n                target: $('.rubricblocks', $section),\n                content : templates.rubricblock,\n                templateData : function(cb){\n                    cb({\n                        'qti-type' : 'rubricBlock',\n                        index  : $('.rubricblock', $section).length,\n                        content : [],\n                        views : [1]\n                    });\n                }\n            });\n\n            //we listen the event not from the adder but  from the data binder to be sure the model is up to date\n            $(document).on('add.binder', '#' + $section.attr('id') + ' .rubricblocks', function(e, $rubricBlock){\n                if(e.namespace === 'binder' && $rubricBlock.hasClass('rubricblock')){\n                    var index = $rubricBlock.data('bind-index'); \n                    $('.rubricblock-binding', $rubricBlock).html('<p>&nbsp;</p>');\n                    rubricBlockView.setUp($rubricBlock, model.rubricBlocks[index], data);\n                }\n            });\n        }        \n   };\n\n   /**\n    * Listen for state changes to enable/disable . Called globally.\n    */\n   var listenActionState =  function listenActionState (){\n\n        var $sections;\n        var $actionContainer;\n        \n        $('.sections').each(function(){\n            $sections = $('.section', $(this));\n\n            actions.removable($sections, 'h2');\n            actions.movable($sections, 'section', 'h2');\n        });\n\n        $(document)\n        .on('delete', function(e){\n            var $parent;\n            var $target = $(e.target);\n            if($target.hasClass('section')){\n                $parent = $target.parents('.sections');\n                actions.disable($parent.find('.section'), 'h2');\n           }\n        })\n        .on('add change undo.deleter deleted.deleter', function(e){\n            var $target = $(e.target);\n            if($target.hasClass('section') || $target.hasClass('sections')){\n                $sections = $('.section', $target.hasClass('sections') ? $target : $target.parents('.sections'));\n                actions.removable($sections, 'h2');\n                actions.movable($sections, 'section', 'h2');\n            }\n        })\n        .on('open.toggler', '.rub-toggler', function(e){\n            if(e.namespace === 'toggler'){\n               $(this).parents('h2').addClass('active'); \n            }\n        })\n        .on('close.toggler', '.rub-toggler', function(e){\n            if(e.namespace === 'toggler'){\n               $(this).parents('h2').removeClass('active'); \n            }\n        });\n   };\n   \n \n   /**\n     * The sectionView setup section related components and beahvior\n     * \n     * @exports taoQtiTest/controller/creator/views/section\n     */\n    return {\n        setUp : setUp,\n        listenActionState: listenActionState\n   };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/testpart',[\n'jquery', 'lodash', \n'taoQtiTest/controller/creator/views/actions', \n'taoQtiTest/controller/creator/views/section',\n'taoQtiTest/controller/creator/templates/index', \n'taoQtiTest/controller/creator/helpers/qtiTest'],\nfunction($, _, actions, sectionView, templates, qtiTestHelper){\n    'use strict';\n\n   /**\n    * Set up a test part: init action beahviors. Called for each test part.\n    *\n    * @param {jQueryElement} $testPart - the testpart to set up\n    * @param {Object} model - the data model to bind to the test part\n    * @param {Object} [data] - additionnal data used by the setup\n    * @param {Array} [data.identifiers] - the locked identifiers\n    */\n   var setUp =  function setUp ($testPart, model, data){\n\n        var $actionContainer = $('h1', $testPart);\n\n        //run setup methods\n        actions.properties($actionContainer, 'testpart', model, propHandler);\n        actions.move($actionContainer, 'testparts', 'testpart');\n        sections();\n        addSection();\n\n        /**\n         * Perform some binding once the property view is created\n         * @private\n         * @param {propView} propView - the view object\n         */\n        function propHandler (propView) {\n            \n           var $view = propView.getView();\n\n            //listen for databinder change to update the test part title\n           var $identifier =  $('[data-bind=identifier]', $testPart);\n           $view.on('change.binder', function(e, model){\n                if(e.namespace === 'binder' && model['qti-type'] === 'testPart'){\n                    $identifier.text(model.identifier);\n                }\n            });\n\n            //destroy it when it's testpart is removed\n            $testPart.on('delete', function(e){\n                if(propView !== null){\n                    propView.destroy();\n                }\n            });\n        }\n\n        /**\n         * Set up sections that already belongs to the test part\n         * @private\n         */\n        function sections(){\n            if(!model.assessmentSections){\n                model.assessmentSections = [];\n            }                   \n            $('.section', $testPart).each(function(){\n                var $section = $(this);\n                var index = $section.data('bind-index');\n                if(!model.assessmentSections[index]){\n                    model.assessmentSections[index] = {};\n                }\n\n                sectionView.setUp($section, model.assessmentSections[index], data);\n            });\n        }\n\n        /**\n         * Enable to add new sections\n         * @private\n         */\n        function addSection(){\n            $('.section-adder', $testPart).adder({\n                target: $('.sections', $testPart),\n                content : templates.section,\n                templateData : function(cb){\n\n                    //create a new section model object to be bound to the template\n                    var sectionIndex = $('.section', $testPart).length;\n                    cb({\n                        'qti-type' : 'assessmentSection',\n                        identifier : qtiTestHelper.getIdentifier('assessmentSection',  data.identifiers),\n                        title : 'Section ' + (sectionIndex + 1),\n                        index : 0,\n                        sectionParts : []             \n                    });\n                }\n            });\n            \n                   \n \n            //we listen the event not from the adder but  from the data binder to be sure the model is up to date\n            $(document)\n              .off('add.binder', '#' + $testPart.attr('id') + ' .sections')\n              .on ('add.binder', '#' + $testPart.attr('id') + ' .sections', function(e, $section){\n                if(e.namespace === 'binder' && $section.hasClass('section')){\n                    var index = $section.data('bind-index'); \n                    //initialize the new test part\n                    sectionView.setUp($section, model.assessmentSections[index], data);\n                }\n            });\n        }\n\n   };\n   \n   /**\n    * Listen for state changes to enable/disable . Called globally.\n    */\n   var listenActionState =  function listenActionState (){\n\n        var $testParts = $('.testpart');\n        \n        actions.removable($testParts, 'h1');\n        actions.movable($testParts, 'testpart', 'h1');\n\n        $('.testparts')\n        .on('delete', function(e){\n            var $target = $(e.target);\n            if($target.hasClass('testpart')){\n                actions.disable($('.testpart'), 'h1');\n           }\n        })\n        .on('add change undo.deleter deleted.deleter', function(e){\n            var $target = $(e.target);\n\n            if($target.hasClass('testpart') || $target.hasClass('testparts')){\n                \n                //refresh\n                $testParts = $('.testpart');\n\n                //check state\n                actions.removable($testParts, 'h1');\n                actions.movable($testParts, 'testpart', 'h1');\n            }\n        });\n   };\n \n    /**\n     * The testPartView setup testpart related components and beahvior\n     * \n     * @exports taoQtiTest/controller/creator/views/testpart\n     */\n    return {\n        setUp : setUp,\n        listenActionState: listenActionState\n   }; \n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/views/test',[\n'jquery', 'lodash',\n'taoQtiTest/controller/creator/views/actions', \n'taoQtiTest/controller/creator/views/testpart',\n'taoQtiTest/controller/creator/templates/index',\n'taoQtiTest/controller/creator/helpers/qtiTest'\n], \nfunction($, _, actions, testPartView, templates, qtiTestHelper){\n    'use strict';\n \n   /**\n     * The TestView setup test related components and beahvior\n     * \n     * @exports taoQtiTest/controller/creator/views/test\n     * @param {Object} model - the data model to bind to the test\n     * @param {Object} [data] - additionnal data used by the setup\n     * @param {Array} [data.identifiers] - the locked identifiers\n     */\n   var testView = function testView (model, data) {\n       \n        actions.properties($('.test-creator-test > h1'), 'test', model, propHandler);\n        testParts();\n        addTestPart();\n\n        /**\n         * set up the exisiting test part views\n         * @private\n         */\n        function testParts () {\n            if(!model.testParts){\n                model.testParts = [];\n            }                   \n            $('.testpart').each(function(){\n                var $testPart = $(this);\n                var index = $testPart.data('bind-index');\n                if(!model.testParts[index]){\n                    model.testParts[index] = {};\n                }\n\n                testPartView.setUp($testPart, model.testParts[index], data);\n            });\n        }\n        \n        /**\n         * Perform some binding once the property view is created\n         * @private\n         * @param {propView} propView - the view object\n         */\n        function propHandler (propView) {\n            \n           var $view = propView.getView();\n\n            //listen for databinder change to update the test part title\n           var $title =  $('.test-creator-test > h1 [data-bind=title]');\n           $view.on('change.binder', function(e, model){\n                if(e.namespace === 'binder' && model['qti-type'] === 'assessmentTest'){\n                    $title.text(model.title);\n                }\n            });\n        }\n\n        /**\n         * Enable to add new test parts\n         * @private\n         */\n        function addTestPart () {\n\n            $('.testpart-adder').adder({\n                target: $('.testparts'),\n                content : templates.testpart,\n                templateData : function(cb){\n\n                    //create an new testPart model object to be bound to the template\n                    var testPartIndex = $('.testpart').length;\n                    cb({\n                        'qti-type' : 'testPart',\n                        identifier : qtiTestHelper.getIdentifier('testPart', data.identifiers),\n                        index  : testPartIndex,\n                        navigationMode : 0,\n                        submissionMode : 0,\n                        assessmentSections : [{\n                            'qti-type' : 'assessmentSection',\n                            identifier : qtiTestHelper.getIdentifier('assessmentSection',  data.identifiers),\n                            title : 'Section 1',\n                            index : 0,\n                            sectionParts : []             \n                        }]\n                    });\n                }\n            });\n            \n            //we listen the event not from the adder but  from the data binder to be sure the model is up to date\n            $(document)\n              .off('add.binder', '.testparts')\n              .on ('add.binder', '.testparts', function(e, $testPart, added){\n                if(e.namespace === 'binder' && $testPart.hasClass('testpart')){\n                    //initialize the new test part\n                    testPartView.setUp($testPart, model.testParts[added.index], data);\n                }\n            });\n        }\n    };\n\n    return testView;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiTest/controller/creator/encoders/dom2qti',['jquery', 'lodash'], function($, _){\n    \n   /**\n    * Get the list of objects attributes to encode\n    * @param {Object} object\n    * @returns {Array}\n    */\n   var getAttributes = function getAttributes(object){\n        return _.omit(object, [\n           'qti-type',\n           'content',\n           'xmlBase',\n           'lang',\n           'label'\n        ]);\n   };\n   \n   /**\n    * Encode object's properties to xml/html string attributes\n    * @param {Object} attributes\n    * @returns {string}\n    */\n   var attrToStr = function attrToStr(attributes){\n     return _.reduce(attributes, function(acc, value, key){\n         if(_.isNumber(value) || (_.isString(value) && !_.isEmpty(value)) ){\n             return acc + ' ' + key + '=\"'+ value + '\" ';\n         }\n         return acc;\n     }, '');  \n   };\n    \n   /**\n    * This encoder is used to transform DOM to JSON QTI and JSON QTI to DOM. \n    * It works now for the rubricBlocks components.\n    * @exports creator/encoders/dom2qti\n    */\n   var Dom2QtiEncoder = {\n       \n       /**\n        * Encode an object to a dom string\n        * @param {Object} modelValue\n        * @returns {string}\n        */\n       encode : function(modelValue){\n           var self = this;\n           \n           if(_.isArray(modelValue)){\n               return _.reduce(modelValue, function(result, value){\n                   return result + self.encode(value);\n               }, '');\n           } else if(_.isObject(modelValue) && modelValue['qti-type']){\n                if(modelValue['qti-type'] === 'textRun'){\n                    return modelValue.content;\n                }\n                var startTag = '<' + modelValue['qti-type'] + attrToStr(getAttributes(modelValue));\n                if(modelValue.content){\n                    return  startTag + '>' + self.encode(modelValue.content) + '</' + modelValue['qti-type'] + '>';\n                } else {\n                    return startTag + '/>';\n                }\n           } \n           return modelValue;\n       },\n       \n       /**\n        * Decode a string that represents a DOM to a QTI formated object\n        * @param {string} nodeValue\n        * @returns {Array}\n        */\n       decode : function(nodeValue){\n           var self = this;\n           var $nodeValue = (nodeValue instanceof $) ? nodeValue : $(nodeValue);\n           var result = [];\n          \n           _.forEach($nodeValue, function(elt){\n               var object;\n                if (elt.nodeType === 3) {\n                    if (!_.isEmpty($.trim(elt.nodeValue))) {\n                        result.push({\n                            'qti-type': 'textRun',\n                            'content': elt.nodeValue,\n                            \"xmlBase\": \"\"\n                        });\n                    }\n                } else if (elt.nodeType === 1){\n                    object = _.merge({\n                        'qti-type': elt.nodeName.toLowerCase(),\n                        'id' : '',\n                        'class' : '',\n                        'xmlBase' : '',\n                        'lang' : '',\n                        'label' : ''\n                    },\n                    _.transform(elt.attributes, function(acc, value) {\n                        acc[value.nodeName] = value.nodeValue;\n                    })\n                    );\n                    if (elt.childNodes.length > 0) {\n                        object.content = self.decode(elt.childNodes);\n                    } \n                    result.push(object);\n                }\n            });\n           return result;\n       }\n   };\n   \n   return Dom2QtiEncoder;\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n */\n/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine(\n'taoQtiTest/controller/creator/creator',['module', 'jquery', 'lodash', 'helpers', 'i18n',\n'ui/feedback',\n'core/databindcontroller', \n'taoQtiTest/controller/creator/views/item', \n'taoQtiTest/controller/creator/views/test',\n'taoQtiTest/controller/creator/views/testpart',\n'taoQtiTest/controller/creator/views/section',\n'taoQtiTest/controller/creator/views/itemref',\n'taoQtiTest/controller/creator/encoders/dom2qti',\n'taoQtiTest/controller/creator/templates/index',\n'taoQtiTest/controller/creator/helpers/qtiTest',\n'core/validator/validators'], \nfunction(module, $, _, helpers, __, feedback,  DataBindController, itemView, testView, testPartView, sectionView, itemrefView, Dom2QtiEncoder, templates, qtiTestHelper, validators ){\n    'use strict';\n\n    /**\n     * Generic callback used when retrieving data from the server\n     * @callback DataCallback\n     * @param {Object} data - the received data\n     */\n\n    /**\n     * Call the server to get the list of items\n     * @param {string} url \n     * @param {string} search - a posix pattern to filter items\n     * @param {DataCallback} cb - with items\n     */\n    function loadItems(url, search, cb){\n        $.getJSON(url, {pattern : search}, function(data){\n            if(data && typeof cb === 'function'){\n                cb(data);\n            }\n        });\n    }\n    \n    \n    /**\n     * The test creator controller is the main entry point\n     * and orchestrates data retrieval and view/components loading. \n     * @exports creator/controller\n     */\n    var Controller = {\n        \n         routes : {},\n\n         identifiers: [],\n        \n         /**\n          * Start the controller, main entry method.\n          * @public \n          * @param {Object} options\n          * @param {Object} options.labels - the list of item's labels to give to the ItemView\n          * @param {Object} options.routes - action's urls\n          */\n         start : function(options){\n            var self = this;\n            var $container = $('#test-creator');\n            var $saver = $('#saver');\n\n\n            options = _.merge(module.config(), options || {});\n            options.routes = options.routes || {};\n            options.labels = options.labels || {};\n\n\n            //back button\n            $('#authoringBack').on('click', function(e){\n                e.preventDefault();\n            \n                //Capitalized History means polyfilled by History.js\n                if(window.History){\n                    window.History.back();\n                }\n            });\n\n            //set up the ItemView, give it a configured loadItems ref\n            itemView( _.partial(loadItems, options.routes.items) );\n\n            //Print data binder chandes for DEBUGGING ONLY\n            //$container.on('change.binder', function(e, model){\n                //if(e.namespace === 'binder'){\n                    //console.log(model);\n                //}\n            //});\n            \n            //Data Binding options\n            var binderOptions = _.merge(options.routes, {\n                filters : {\n                    'isItemRef' : function(value){\n                        return qtiTestHelper.filterQtiType(value, 'assessmentItemRef');\n                    },\n                    'isSection' : function(value){\n                        return qtiTestHelper.filterQtiType(value, 'assessmentSection');\n                    }\n                },\n                encoders : {\n                  'dom2qti' : Dom2QtiEncoder  \n                },\n                templates : templates,\n                beforeSave : function(model){\n                    //ensure the qti-type is present\n                    qtiTestHelper.addMissingQtiType(model); \n                    \n                    //apply consolidation rules\n                    qtiTestHelper.consolidateModel(model);\n                    return true;\n                }\n            });\n            \n            //set up the databinder\n            var binder = DataBindController\n                .takeControl($container, binderOptions)\n                .get(function(model){\n\n                    //extract ids\n                    self.identifiers = qtiTestHelper.extractIdentifiers(model);\n\n                    //register validators\n                    validators.register('testIdFormat', qtiTestHelper.idFormatValidator());\n                    validators.register('testIdAvailable', qtiTestHelper.idAvailableValidator(self.identifiers));\n            \n                    //once model is loaded, we set up the test view\n                    testView(model, {\n                        uri : options.uri,\n                        identifiers : self.identifiers,\n                        labels : options.labels\n                    });\n    \n                    //listen for changes to update available actions\n                    testPartView.listenActionState();\n                    sectionView.listenActionState();\n                    itemrefView.listenActionState();\n                    itemrefView.resize();\n                \n                    $(window)\n                      .off('resize.qti-test-creator')\n                      .on('resize.qti-test-creator', function(){\n                            itemrefView.resize();\n                    });\n                });\n               \n            //the save button triggers binder's save action.\n            $saver.on('click', function(event){\n                event.preventDefault();\n        \n                if(!$saver.hasClass('disabled')){\n                    $saver.attr('disabled', true).addClass('disabled');\n                    binder.save(function(){\n\n                        $saver.attr('disabled', false).removeClass('disabled');\n\n                        feedback().success(__('Test Saved'));\n\n                    }, function(){\n\n                        $saver.attr('disabled', false).removeClass('disabled');\n                    });\n                }\n            });\n        }\n    };\n    \n    return Controller;\n});\n\n","define('serviceApi/ServiceApi',['jquery', 'urlParser', 'iframeResizer'], function($, UrlParser, iframeResizer){\n    \n    function ServiceApi(baseUrl, parameters, serviceCallId, stateStorage, userService){\n        this.baseUrl = baseUrl;\n        this.parameters = parameters;\n        this.connected = false;\n\n        this.serviceCallId = serviceCallId; \n        this.state = stateStorage;\n        this.userService = userService;\n\n        this.onFinishCallback;\n        this.onKillCallback;\n        this.onDisplayChangeCallback;\n    }\n\n    ServiceApi.SIG_SUCCESS = 0; \n    ServiceApi.SIG_ERROR = 1;\n        \n    ServiceApi.prototype.loadInto = function(frame, connected){\n        var self = this;\n        var $frame = $(frame);\n        var callUrl = this.getCallUrl();        \n        var isCORSAllowed = new UrlParser(callUrl).checkCORS();\n\n        $frame.on('load', function(e){\n             //if we are  in the same domain, we add a variable\n             //to the frame window, so the frame knows it can communicate\n             //with the parent\n            $(document).on('serviceready', function(){\n                self.connect(frame, function(){\n                    $(document).off('serviceready');\n                    if(typeof connected === 'function'){\n                        connected();\n                    }\n                });\n            });\n             if(isCORSAllowed === true){\n                 frame.contentWindow.__knownParent__ = true;\n             }\n         });\n\n        $frame.attr('src', callUrl);\n    };\n\n    ServiceApi.prototype.connect = function(frame, connected){\n        if(this.connected === false && frame.contentWindow){\n            //frame.contentWindow.serviceApi = this;\n            if (typeof(frame.contentWindow.onServiceApiReady) === \"function\") {\n                frame.contentWindow.onServiceApiReady(this);\n                this.connected = true;\n                if(typeof connected === 'function'){\n                    connected();\n                }\n            }\n        }\n    };\n    \n    /**\n     * Get the service call URL\n     * @returns {String} the URI\n     */\n    ServiceApi.prototype.getCallUrl = function(){\n        var params = this.parameters || {};\n        params.serviceCallId = this.serviceCallId;\n        return this.baseUrl + '?' + $.param(params);\n    };\n\n    ServiceApi.prototype.getUserPropertyValues = function(property, callback){\n    \tthis.userService.get(property, callback);\n    };\n    \n    //Context\n    ServiceApi.prototype.getServiceCallId = function(){\n        return this.serviceCallId;\n    };\n\n    //Context\n    ServiceApi.prototype.getState = function(){\n        return this.state.get();\n    };\n\n    ServiceApi.prototype.setState = function(state, callback){\n        return this.state.set(state, callback);\n    };\n\n    // Variables \n    ServiceApi.prototype.getParameter = function(identifier){\n        if (typeof(this.parameters[identifier]) !== \"undefined\") {\n            return this.parameters[identifier];\n        } else {\n            return null;\n        }\n    };\n\n    ServiceApi.prototype.onFinish = function(callback) {\n        this.onFinishCallback = callback;\t\n    };\n\n    ServiceApi.prototype.onKill = function(callback) {\n        this.onKillCallback = callback;\t\n    };\n    \n    ServiceApi.prototype.kill = function(callback) {\n    \tif (typeof this.onKillCallback == 'function') {\n    \t\tthis.onKillCallback(callback);\n    \t} else {\n    \t\tcallback(0);\n    \t}\n    };\n    \n    // Flow\n    // valueArray are return parameters of the service.\n    ServiceApi.prototype.finish = function(valueArray) {\n            //return execution to service caller\n            if (typeof this.onFinishCallback === 'function') {\n                    this.onFinishCallback(valueArray);\n            }\n    };\n\n    return ServiceApi;\n\n});\n\n","define('serviceApi/UserInfoService',['jquery'], function($){\n    \n    function UserInfoService(requestUrl, data) {\n        this.data = data;\n        this.requestUrl = requestUrl;\n    }\n\n    UserInfoService.prototype.get = function(property, callback){\n        if (this.data.hasOwnProperty(property)) {\n            if (typeof callback === \"function\") {\n                    callback(this.data[property]);\n            }\n        } else {\n            $.ajax({\n                url : this.requestUrl,\n                data \t\t: {\n                    'property' : property\n                },\n                type        : 'post',\n                dataType\t: 'json',\n                success     : (function(service, callback) {return function(r) {\n            \t\tfor (key in r.data) {\n            \t\t\tservice.data[key] = r.data[key];\n            \t\t}\n                    if (typeof callback === \"function\") {\n                        callback(service.data[property]);\n                    }\n\n                }})(this, callback)\n                /*\t\n            \tfunction(r){\n                    if(r.success){\n                    \tconsole.log(this.data);\n                    \tthis.data[property] = r.values;\n                    \t//console.log(this.data);\n\t                    if (typeof callback === \"function\") {\n\t                        callback(this.data[property]);\n\t                    }\n                    }\n                }\n                */\n                \n                \n            });\n        }\n    };\n\n    return UserInfoService;\n});\n","define('serviceApi/StateStorage',['jquery'], function($){\n    \n    function StateStorage(state, submitUrl) {\n        this.state = state;\n        this.submitUrl = submitUrl;\n    }\n\n    StateStorage.prototype.get = function(callback){\n        if (typeof callback === 'function') {\n                callback(this.state);\n        }\n        return this.state;\n    };\n\n    StateStorage.prototype.set = function(state, callback){\n\n        if (state === this.state) {\n            if (typeof callback === \"function\") {\n                    callback();\n            }\n        } else {\n            $.ajax({\n                url : this.submitUrl,\n                data \t\t: {\n                    'state' : state\n                },\n                type        : 'post',\n                dataType\t: 'json',\n                success     : typeof callback === \"function\" ? callback : null\n            });\n        }\n    };\n\n    return StateStorage;\n});\n","// Badonkatrunc 1.0.0, (http://badonkatrunc.com)\n// Copyright (c) 2012 Plexipixel, Inc. (http://plexipixel.com)\n\n// Developed by: Joel Day (joeld@plexipixel.com)\n// Co-conspirator: David Seelig\n\n// Permission is hereby granted, free of charge, to any person obtaining\n// a copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to\n// the following conditions:\n\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\ndefine('jquery.trunc',['jquery'],function($){var methods={init:function(options){var all=this;var instanceOptions=$.extend(true,{},$.fn.badonkatrunc.defaultOptions,options);if(instanceOptions.fitDirection!=\"horizontal\"&&instanceOptions.fitDirection!=\"vertical\"){$.error(\"'\"+instanceOptions.fitDirection+\"' is not a valid fit direction. Use 'horizontal' or 'vertical.'\");return this;}if(instanceOptions.truncateLocation!=\"start\"&&instanceOptions.truncateLocation!=\"middle\"&&instanceOptions.truncateLocation!=\"end\"){$.error(\"'\"+instanceOptions.truncateLocation+\"' is not a valid truncation location. Use 'start,' 'middle' or 'end.'\");return this;}if(instanceOptions.minimumFontSize>instanceOptions.maximumFontSize){$.error(\"Minimum font size can not exceed the maximum font size.\");return this;}if(instanceOptions.minimumLetterSpacing>instanceOptions.maximumLetterSpacing){$.error(\"Minimum letter spacing can not exceed the maximum letter spacing.\");return this;}return this.each(function(){var $this=$(this);var data=$(this).data(\"badonkatrunc\");if(data){$this.badonkatrunc(\"destroy\");}var instance=pluginInstance($this,instanceOptions,all);$(this).data(\"badonkatrunc\",instance);instance.init();if(instance.options.automaticSizeTracking){resizeMonitor.add(instance);}});},destroy:function(){return this.each(function(){var $this=$(this);var data=$this.data(\"badonkatrunc\");data.destroy();resizeMonitor.remove(data);dirtyMonitor.remove(data);$(window).unbind(\".badonkatrunc\");$this.removeData(\"badonkatrunc\");});},refresh:function(){return this.each(function(){var $this=$(this);var data=$this.data(\"badonkatrunc\");dirtyMonitor.remove(data);data.refresh();});},changeContents:function(newContents){return this.each(function(){var $this=$(this);var data=$this.data(\"badonkatrunc\");if(typeof(newContents)==\"string\"){data.contentHtml=$(\"<span></span>\").text(newContents).html();}else{data.contentHtml=$(newContents).html();}dirtyMonitor.add(data);});}};$.fn.badonkatrunc=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method===\"object\"||!method){return methods.init.apply(this,arguments);}else{$.error(\"Method \"+method+\" does not exist on jQuery.badonkatrunc\");}}};$.fn.badonkatrunc.settings={sizeTrackingTimeout:1000/60};$.fn.badonkatrunc.defaultOptions={automaticSizeTracking:false,fitDirection:\"horizontal\",minimumFontSize:1,maximumFontSize:1,fontSizeSynced:false,minimumLetterSpacing:0,maximumLetterSpacing:0,letterSpacingSynced:false,truncate:true,truncateString:\"&hellip;\",truncateLocation:\"end\",truncateOnlyWholeWords:false,extraOptimizeLimit:8};$.fn.btrunc=$.fn.badonkatrunc;var pluginInstance=function($target,options,$targetGroup){var createRenderState=function(content,fontSize,letterSpacing){return{content:content,fontSize:fontSize,letterSpacing:letterSpacing};};var instance={target:$target,options:options,refresh:function(){var self=this;var view=createHtmlTextView(this.contentHtml);var text=this.contentHtml;var fontSize=this.options.maximumFontSize;var letterSpacing=this.options.maximumLetterSpacing;var renderFunc=function(){var state=createRenderState(text,fontSize,letterSpacing);self.renderState(state);};var overflowFunc=function(){return self.getCurrentOverflow();};if(this.options.maximumFontSize-this.options.minimumFontSize>0){optimize(self.options.minimumFontSize,self.options.maximumFontSize,function(value){fontSize=value;renderFunc();},overflowFunc);}if(this.options.maximumLetterSpacing-this.options.minimumLetterSpacing>0){var truncationLevel=1;if(this.options.truncate){optimize(0,1,function(value){truncationLevel=value;text=getTruncatedHtml(view,self.options.truncateString,self.options.truncateLocation,value,true);optimize(self.options.minimumLetterSpacing,0,function(value){letterSpacing=value;renderFunc();},overflowFunc);renderFunc();},overflowFunc);}if(truncationLevel==1){optimize(self.options.minimumLetterSpacing,self.options.maximumLetterSpacing,function(value){letterSpacing=value;renderFunc();},overflowFunc);}}if(this.options.truncate){optimize(0,1,function(value){text=getTruncatedHtml(view,self.options.truncateString,self.options.truncateLocation,value,self.options.truncateOnlyWholeWords);renderFunc();},overflowFunc,this.options.extraOptimizeLimit);}this.renderState(createRenderState(text,fontSize,letterSpacing),!this.options.truncate);this.currentOptimalState=this.currentRenderedState;this.syncFonts();},syncFonts:function(){if($targetGroup.length>1&&(this.options.fontSizeSynced||this.options.letterSpacingSynced)){var lowestFontSize=this.currentOptimalState.fontSize;var lowestLetterSpacing=this.currentOptimalState.letterSpacing;for(var i=0;i<$targetGroup.length;i++){var groupInstance=$($targetGroup[i]).data(\"badonkatrunc\");if(groupInstance!=null&&groupInstance.currentOptimalState!=null){if(groupInstance.currentOptimalState.fontSize<lowestFontSize){lowestFontSize=groupInstance.currentOptimalState.fontSize;}if(groupInstance.currentOptimalState.letterSpacing<lowestLetterSpacing){lowestLetterSpacing=groupInstance.currentOptimalState.letterSpacing;}}}for(var i=0;i<$targetGroup.length;i++){var groupInstance=$($targetGroup[i]).data(\"badonkatrunc\");if(groupInstance!=null){groupInstance.acceptFontSync(lowestFontSize,lowestLetterSpacing);}}}},acceptFontSync:function(fontSize,letterSpacing){var self=this;var view=createHtmlTextView(this.contentHtml);var text=this.contentHtml;if(this.currentOptimalState!=null){if(!this.options.fontSizeSynced){fontSize=this.currentOptimalState.fontSize;}if(!this.options.letterSpacingSynced){letterSpacing=this.currentOptimalState.letterSpacing;}}var renderFunc=function(){self.renderState(createRenderState(text,fontSize,letterSpacing));};var overflowFunc=function(){return self.getCurrentOverflow();};if(this.options.truncate){optimize(0,1,function(value){text=getTruncatedHtml(view,self.options.truncateString,self.options.truncateLocation,value,self.options.truncateOnlyWholeWords);renderFunc();},overflowFunc);}this.renderState(createRenderState(text,fontSize,letterSpacing),!this.options.truncate);},init:function(){this.contentHtml=this.target.html();this.settingsWrapper=$('<span style=\"margin: 0px; padding: 0px; border: 0px;\"></span>');this.settingsWrapper.addClass(\"badonkatrunc-wrapper\");if(!$.browser.mozilla&&!$.browser.opera&&!($.browser.msie&&$.browser.version==\"7.0\")){this.settingsWrapper.css(\"display\",\"block\");}this.target.empty();this.target.append(this.settingsWrapper);this.refresh();},destroy:function(){this.target.empty();this.target.append(this.contentHtml);},renderState:function(state,forceAllowWrap){this.settingsWrapper.css(\"font-size\",state.fontSize+\"em\");this.settingsWrapper.css(\"letter-spacing\",state.letterSpacing+\"em\");var whiteSpace=(!forceAllowWrap&&this.options.fitDirection==\"horizontal\")?\"nowrap\":\"normal\";this.settingsWrapper.css(\"white-space\",whiteSpace);this.settingsWrapper.empty();this.settingsWrapper.append(state.content);this.currentRenderedState=state;},getCurrentOverflow:function(){var wrapper=this.settingsWrapper[0];var overflow=(this.options.fitDirection==\"horizontal\")?wrapper.scrollWidth-$target.width():wrapper.offsetHeight-$target.height();return overflow;}};return instance;};var createDispatcher=function(updateFunc,addFunc,removeFunc,updateTimeout){var dispatcherInstance={_instances:[],_updateLoop:function(){if($.isFunction(updateFunc)){for(var i=0;i<dispatcherInstance._instances.length;i++){updateFunc(dispatcherInstance._instances[i]);}}if(updateTimeout!=null){if(dispatcherInstance._instances.length>0){setTimeout(dispatcherInstance._updateLoop,updateTimeout);}}else{dispatcherInstance._instances=[];}},add:function(instance){if($.inArray(instance,this._instances)!=-1){return;}if($.isFunction(addFunc)){addFunc(instance);}this._instances.push(instance);if(this._instances.length==1){if(updateTimeout==null){setTimeout(this._updateLoop);}else{this._updateLoop();}}},remove:function(instance){var index=$.inArray(instance,this._instances);if(index!=-1){this._instances.splice(index,1);if($.isFunction(removeFunc)){removeFunc(instance);}}}};return dispatcherInstance;};var resizeMonitor=createDispatcher(function(instance){instance.elementSizeCache.update();},function(instance){instance.elementSizeCache={width:null,height:null,update:function(){var newWidth=instance.target.width();var newHeight=instance.target.height();var hasChanged=((this.width!=null&&newWidth!=this.width)||(this.height!=null&&newHeight!=this.height));this.width=newWidth;this.height=newHeight;if(hasChanged){this.changed();}},changed:function(){dirtyMonitor.add(instance);}};},function(instance){instance.elementSizeCache=undefined;},$.fn.badonkatrunc.settings.sizeTrackingTimeout);var dirtyMonitor=createDispatcher(function(instance){instance.refresh.apply(instance);},null,null,null);var getTruncatedHtml=function(htmlTextView,truncateString,truncateLocation,amount,wordRounded){var text=htmlTextView.text;if(amount>1){amount=1;}if(amount<0){amount=0;}if(amount==1){return htmlTextView.html;}var getTruncatedRange=function(begin,length){var words=text.split(\" \");var totalEntities=(wordRounded)?words.length:text.length;var entityBegin=totalEntities*begin;var entityLength=totalEntities*length;if(wordRounded){var getCharacterPosition=function(wordIndex){var characterCount=0;for(var i=0;i<wordIndex;i++){characterCount+=words[i].length+1;}return characterCount;};var endWord=entityBegin+entityLength;entityBegin=getCharacterPosition(entityBegin);entityLength=getCharacterPosition(endWord)-entityBegin;}return htmlTextView.getHtmlSubstring(entityBegin,entityLength);};switch(truncateLocation){case\"middle\":var amountPerSide=amount/2;var left=getTruncatedRange(0,amountPerSide);var right=getTruncatedRange(1-amountPerSide,amountPerSide);return $.trim(left)+\" \"+truncateString+\" \"+$.trim(right);case\"start\":var truncated=getTruncatedRange(1-amount,amount);return truncateString+$.trim(truncated);case\"end\":var truncated=getTruncatedRange(0,amount);return $.trim(truncated)+truncateString;}};var createHtmlTextView=function(contentHtml){var $content=$(\"<span></span>\");$content.html(contentHtml);var view={html:contentHtml,text:$content.text(),getHtmlSubstring:function(index,length){var element=$content.clone()[0];var totalProcessedLength=0;var totalOutputLength=0;var nodesWithinRange=[];var withinRange=false;var stripOutOfRangeTextInElement=function(node){if(node.nodeType==3){var dataLength=node.data.length;var newData=\"\";var wasWithinRange=false;for(var i=0;i<dataLength;i++){totalProcessedLength++;if(totalProcessedLength>=index&&totalOutputLength<length){withinRange=true;wasWithinRange=true;newData+=node.data.substr(i,1);totalOutputLength++;}else{if(withinRange==true){withinRange=false;}}}node.data=newData;if(wasWithinRange){nodesWithinRange.push(node);}}else{if(node.nodeType==1){if(withinRange){nodesWithinRange.push(node);}var childCount=node.childNodes.length;for(var i=0;i<childCount;i++){stripOutOfRangeTextInElement(node.childNodes[i]);}}}};stripOutOfRangeTextInElement(element);var parentNodesToKeep=[];var markParentNodesToKeep=function(element){var keepNode=function(node){parentNodesToKeep.push(node);if(node.parentNode!=null){keepNode(node.parentNode);}};keepNode(element);};var nodesWithinRangeCount=nodesWithinRange.length;for(var t=0;t<nodesWithinRangeCount;t++){markParentNodesToKeep(nodesWithinRange[t]);}var removeUnusedNodes=function(node){var nodesToRemove=[];var childNodeCount=node.childNodes.length;for(var i=0;i<childNodeCount;i++){var childNode=node.childNodes[i];if(childNode.nodeType!=3){if($.inArray(childNode,parentNodesToKeep)==-1){nodesToRemove.push(childNode);}else{removeUnusedNodes(childNode);}}}for(var i=0;i<nodesToRemove.length;i++){var node=nodesToRemove[i];node.parentNode.removeChild(node);}};removeUnusedNodes(element);return $(element).html();}};return view;};var optimize=function(min,max,actionFunc,overflowFunc,extraOptimizeLimit){var currentMax=max;var currentMin=min;var currentValue=max;var lastResult=null;var mostOptimalResult=null;var mostOptimalValue=null;var sameResultCount=0;while(true){actionFunc(currentValue);var result=overflowFunc();if(result<=0){var moreOptimal=true;if(mostOptimalResult!=null){if(mostOptimalResult>result){moreOptimal=false;}else{if(result==mostOptimalResult){if(currentValue<=mostOptimalValue){moreOptimal=false;}}}}if(moreOptimal){mostOptimalResult=result;mostOptimalValue=currentValue;}}if(result==lastResult){sameResultCount++;if(extraOptimizeLimit==undefined||sameResultCount==extraOptimizeLimit){if(mostOptimalValue!=null){actionFunc(mostOptimalValue);}return;}}if(result>0){currentMax=currentValue;var difference=(currentValue-currentMin);currentValue-=(difference/2);}else{if(result<=0){currentMin=currentValue;currentValue=currentMax;}}lastResult=result;}};});\n\n","define('taoQtiTest/controller/runtime/testRunner',['jquery', 'lodash', 'spin', 'serviceApi/ServiceApi', 'serviceApi/UserInfoService', 'serviceApi/StateStorage', 'iframeResizer', 'iframeNotifier', 'i18n', 'mathJax', 'jquery.trunc', 'ui/progressbar'],\n    function($,  _, Spinner, ServiceApi, UserInfoService, StateStorage, iframeResizer, iframeNotifier, __, MathJax){\n\n\t    var timerIds = [];\n\t    var currentTimes = [];\n\t    var lastDates = [];\n\t\tvar timeDiffs = [];\n\t\tvar waitingTime = 0;\n\n\t    var TestRunner = {\n\t    // Constants\n\t    'TEST_STATE_INITIAL': 0,\n\t    'TEST_STATE_INTERACTING': 1,\n\t    'TEST_STATE_MODAL_FEEDBACK': 2,\n\t    'TEST_STATE_SUSPENDED': 3,\n\t    'TEST_STATE_CLOSED': 4,\n\t    'TEST_NAVIGATION_LINEAR': 0,\n\t    'TEST_NAVIGATION_NONLINEAR': 1,\n\t    'TEST_ITEM_STATE_INTERACTING': 1,\n\n\t\tbeforeTransition : function(callback) {\n\t\t    // Ask the top window to start the loader.\n            iframeNotifier.parent('loading');\n\n            // Disable buttons.\n\t\t    this.disableGui();\n\n\t        $('#qti-item, #qti-info, #qti-rubrics, #qti-timers').css('display', 'none');\n\n\t        // Wait at least waitingTime ms for a better user experience.\n\t        if(typeof callback === 'function'){\n\t            setTimeout(callback, waitingTime);\n\t        }\n\t\t},\n\n\t\tafterTransition : function() {\n\t\t    this.enableGui();\n\n    \t    //ask the top window to stop the loader\n    \t    iframeNotifier.parent('unloading');\n\t\t},\n\n\t\tmoveForward: function() {\n\t\t    this.disableGui();\n\n\t\t    var that = this;\n\t\t    this.itemServiceApi.kill(function(signal) {\n\t\t        that.actionCall('moveForward');\n\t\t    });\n\t\t},\n\n\t\tmoveBackward : function() {\n\t\t    this.disableGui();\n\n\t\t    var that = this;\n\t\t    this.itemServiceApi.kill(function(signal) {\n                that.actionCall('moveBackward');\n            });\n\t\t},\n\n\t\tskip : function() {\n\t\t    this.disableGui();\n\n\t\t\tthis.actionCall('skip');\n\t\t},\n\n\t\ttimeout: function() {\n\t\t    this.disableGui();\n\n\t\t\tthis.assessmentTestContext.isTimeout = true;\n\t\t\tthis.updateTimer();\n\t\t\tthis.actionCall('timeout');\n\t\t},\n\n\t\tcomment : function() {\n\t\t\t$('#qti-comment > textarea').val(__('Your comment...'));\n\t\t    $('#qti-comment').css('display', 'block');\n\t\t    $('#qti-comment > button').css('display', 'inline');\n\t\t},\n\n\t\tcloseComment : function() {\n\t\t    $('#qti-comment').css('display', 'none');\n\t\t},\n\n\t\temptyComment : function() {\n\t\t    $('#qti-comment > textarea').val('');\n\t\t},\n\n\t\tstoreComment: function() {\n\t\t    var self = this;\n\t\t    $.ajax({\n\t\t            url: self.assessmentTestContext.commentUrl,\n\t\t            cache: false,\n\t\t            async: true,\n\t\t            type: 'POST',\n\t\t            data: { comment: $('#qti-comment > textarea').val() },\n\t\t            success: function(assessmentTestContext, textStatus, jqXhr) {\n\t\t                self.closeComment();\n\t\t            }\n\t\t    });\n\t\t},\n\n\t\tupdate : function(assessmentTestContext) {\n\t\t\tvar self = this;\n\t\t\t$('#qti-item').remove();\n\n\t\t\tvar $runner = $('#runner');\n\t\t\t$runner.css('height', 'auto');\n\n\t\t\tthis.assessmentTestContext = assessmentTestContext;\n\t\t\tthis.itemServiceApi = eval(assessmentTestContext.itemServiceApiCall);\n\n\t\t\tthis.updateContext();\n\t\t\tthis.updateProgress();\n\t\t\tthis.updateNavigation();\n\t\t\tthis.updateInformation();\n\t\t\tthis.updateRubrics();\n\t\t\tthis.updateTools();\n\t\t\tthis.updateTimer();\n\n\t\t\t$itemFrame = $('<iframe id=\"qti-item\" frameborder=\"0\"/>');\n\t\t\t$itemFrame.appendTo('#qti-content');\n\t\t\tiframeResizer.autoHeight($itemFrame, 'body');\n\n\t\t\tif (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false == true) {\n\t\t\t    $('#qti-content').css('overflow-y', 'scroll');\n\t\t\t}\n\n\t\t\tif (this.assessmentTestContext.itemSessionState === this.TEST_ITEM_STATE_INTERACTING && self.assessmentTestContext.isTimeout === false) {\n\t\t\t    $(document).on('serviceloaded', function() {\n\t\t\t        self.afterTransition();\n                    self.adjustFrame();\n                    $itemFrame.show();\n\t\t\t    });\n\n\t\t\t    // Inject API into the frame.\n\t\t\t    this.itemServiceApi.loadInto($itemFrame[0], function(){\n\t\t\t        // We now rely on the 'serviceloaded' event.\n\t\t\t    });\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// e.g. no more attempts or timeout! Simply consider the transition is finished,\n\t\t\t\t// but do not load the item.\n\t\t\t\tself.afterTransition();\n\t\t\t}\n\t\t},\n\n\t\tupdateInformation : function() {\n            $('#qti-info').remove();\n\n            if (this.assessmentTestContext.isTimeout === true) {\n            \t$('<div id=\"qti-info\" class=\"info\"></div>').prependTo('#qti-content');\n            \t$('#qti-info').html(__('Maximum time limit reached for item \"%s\".').replace('%s', this.assessmentTestContext.itemIdentifier));\n            }\n            else if (this.assessmentTestContext.itemSessionState !== this.TEST_ITEM_STATE_INTERACTING) {\n            \t$('<div id=\"qti-info\" class=\"info\"></div>').prependTo('#qti-content');\n            \t$('#qti-info').html(__('No more attempts allowed for item \"%s\".').replace('%s', this.assessmentTestContext.itemIdentifier));\n            }\n\t\t},\n\n\t\tupdateTools : function updateTools() {\n\t\t    if (this.assessmentTestContext.allowComment === true) {\n\t            $('#comment').css('display', 'inline');\n\t\t    }\n\t\t    else {\n\t            $('#comment').css('display', 'none');\n\t\t    }\n\n\t\t    if (this.assessmentTestContext.allowSkipping === true) {\n\t\t        if (this.assessmentTestContext.isLast === false) {\n\t\t            $('#skip').css('display', 'inline');\n\t\t            $('#skip-end').css('display', 'none');\n\t\t        }\n\t\t        else {\n\t\t            $('#skip-end').css('display', 'inline');\n\t\t            $('#skip').css('display', 'none');\n\t\t        }\n\t\t    }\n\t\t    else {\n\t\t    \t$('#skip').css('display', 'none');\n\t\t    \t$('#skip-end').css('display', 'none');\n\t\t    }\n\t\t},\n\n\t\tupdateTimer : function() {\n\t\t\tvar self = this;\n\t\t\t$('#qti-timers').remove();\n\n\t\t\tfor (var i = 0; i < timerIds.length; i++) {\n\t\t\t\tclearTimeout(timerIds[i]);\n\t\t\t}\n\n\t\t    timerIds = [];\n\t\t    currentTimes = [];\n\t\t    lastDates = [];\n\t\t\ttimeDiffs = [];\n\n\t\t\tif (self.assessmentTestContext.isTimeout == false && self.assessmentTestContext.itemSessionState == self.TEST_ITEM_STATE_INTERACTING) {\n\n\t\t\t    if (this.assessmentTestContext.timeConstraints.length > 0) {\n\n\t\t\t    \t// Insert QTI Timers container.\n\t\t\t    \t$('<div id=\"qti-timers\"></div>').prependTo('#qti-content');\n\t\t\t    \t// self.formatTime(cst.seconds)\n\t\t\t        for (var i = 0; i < this.assessmentTestContext.timeConstraints.length; i++) {\n\n\t\t\t        \tvar cst = this.assessmentTestContext.timeConstraints[i];\n\n\t\t\t        \tif (cst.allowLateSubmission == false) {\n\t\t\t        \t // Set up a timer for this constraint.\n\t                        $('<div class=\"qti-timer\"><span class=\"icon-time\"></span> ' + cst.source + ' - ' + self.formatTime(cst.seconds) + '</div>').appendTo('#qti-timers');\n\n\t                        // Set up a timer and update it with setInterval.\n\t                        currentTimes[i] = cst.seconds;\n\t                        lastDates[i] = new Date();\n\t                        timeDiffs[i] = 0;\n\t                        timerIndex = i;\n\t                        source = cst.source;\n\n\t                        // ~*~*~ ❙==[||||)0__    <----- SUPER CLOSURE !\n\t                        var superClosure = function(timerIndex, source) {\n\t                            timerIds[timerIndex] = setInterval(function() {\n\n\t                                timeDiffs[timerIndex] += (new Date()).getTime() - lastDates[timerIndex].getTime();\n\n\t                                if (timeDiffs[timerIndex] >= 1000) {\n\t                                    var seconds = timeDiffs[timerIndex] / 1000;\n\t                                    currentTimes[timerIndex] -= seconds;\n\t                                    timeDiffs[timerIndex] = 0;\n\t                                }\n\n\t                                if (currentTimes[timerIndex] <= 0) {\n\t                                    // The timer expired...\n\t                                    $('#qti-timers > .qti-timer').eq(timerIndex).html(self.formatTime(Math.round(currentTimes[timerIndex])));\n\t                                    currentTimes[timerIndex] = 0;\n\t                                    clearInterval(timerIds[timerIndex]);\n\n\t                                     // Hide item to prevent any further interaction with the candidate.\n                                        $('#qti-item').css('display', 'none');\n                                        self.timeout();\n\t                                }\n\t                                else {\n\t                                    // Not timed-out...\n\t                                    $('#qti-timers > .qti-timer').eq(timerIndex).html('<span class=\"icon-time\"></span> ' + source + ' - ' + self.formatTime(Math.round(currentTimes[timerIndex])));\n\t                                    lastDates[timerIndex] = new Date();\n\t                                }\n\n\t                            }, 1000);\n\t                        }\n\n\t                        superClosure(timerIndex, source);\n\t\t\t        \t}\n\t\t\t        }\n\n\t\t\t        $('#qti-timers').css('display', 'block');\n\t\t\t    }\n\t\t\t}\n\t\t},\n\n\t\tupdateRubrics : function() {\n\t\t    $('#qti-rubrics').remove();\n\n\t\t    if (this.assessmentTestContext.rubrics.length > 0) {\n\n                var $rubrics = $('<div id=\"qti-rubrics\"></div>');\n\n                for (var i = 0; i < this.assessmentTestContext.rubrics.length; i++) {\n                        $rubrics.append(this.assessmentTestContext.rubrics[i]);\n                }\n\n                // modify the <a> tags in order to be sure it\n                // opens in another window.\n                $rubrics.find('a').bind('click keypress', function() {\n                        window.open(this.href);\n                        return false;\n                });\n\n                $rubrics.prependTo('#qti-content');\n\n                if(MathJax){\n                    MathJax.Hub.Queue([\"Typeset\", MathJax.Hub], $('#qti-rubrics')[0]);\n                }\n\n\t\t    }\n\t\t},\n\n\t\tupdateNavigation: function() {\n\t\t    if (this.assessmentTestContext.navigationMode === this.TEST_NAVIGATION_LINEAR) {\n\t\t    \t// LINEAR\n\t    \t\t$('#move-backward').css('display', 'none');\n\t    \t\t$('#move-forward').css('display', (this.assessmentTestContext.isLast === true) ? 'none' : 'inline');\n\t    \t\t$('#move-end').css('display', (this.assessmentTestContext.isLast === true) ? 'inline' : 'none');\n\t\t    }\n\t\t    else {\n\t\t    \t// NONLINEAR\n\t\t    \t$('#qti-actions').css('display', 'block');\n\t\t    \t$('#move-forward').css('display', (this.assessmentTestContext.isLast === true) ? 'none' : 'inline');\n\t\t    \t$('#move-end').css('display', (this.assessmentTestContext.isLast === true) ? 'inline' : 'none');\n\t\t    \t$('#move-backward').css('display', (this.assessmentTestContext.canMoveBackward === true) ? 'inline' : 'none');\n\t\t    }\n\t\t},\n\n\t\tupdateProgress: function() {\n\n\t\t    var considerProgress = this.assessmentTestContext.considerProgress;\n\n\t\t    $('#qti-test-progress').css('visibility', (considerProgress === true) ? 'visible' : 'hidden');\n\n\t\t    if (considerProgress === true) {\n\t\t        var ratio = Math.floor(this.assessmentTestContext['numberCompleted'] / this.assessmentTestContext['numberItems'] * 100);\n\t            var label = __('Test completed at %d%%').replace('%d', ratio).replace('%%', '%');\n\t            $('#qti-progress-label').text(label);\n\t            $('#qti-progressbar').progressbar('value', ratio);\n\t\t    }\n\t\t},\n\n\t\tupdateContext: function() {\n\n\t\t    var testTitle = this.assessmentTestContext.testTitle;\n\t\t    var testPartId = this.assessmentTestContext.testPartId;\n\t\t    var sectionTitle = this.assessmentTestContext.sectionTitle;\n\n\t\t    $('#qti-test-title').text(testTitle);\n\n\t\t    try {\n\t\t        $('#qti-test-title, #qti-test-position').badonkatrunc('destroy');\n\t\t    }\n\t\t    catch (e) {\n\t\t        // Very first call, the badonkatrunc wrapper was not there.\n\t\t        // Continue normally.\n\t\t    }\n\n\t\t    $('#qti-test-position').empty().append('<span id=\"qti-section-title\">' + sectionTitle + '</span>');\n\t\t    $('#qti-test-title, #qti-test-position').badonkatrunc().css('visibility', 'visible');\n\t\t},\n\n\t\tadjustFrame: function() {\n\n\t\t    var actionsHeight = $('#qti-actions').outerHeight();\n\t\t    var windowHeight = window.innerHeight ? window.innerHeight : $(window).height();\n\t\t    var navigationHeight = $('#qti-navigation').outerHeight();\n\t\t    var newContentHeight = windowHeight - actionsHeight - navigationHeight;\n\n\t\t    var $content = $('#qti-content');\n\t\t    $content.height(newContentHeight - parseInt($content.css('paddingTop')) - parseInt($content.css('paddingBottom')));\n\t\t},\n\n\t\tdisableGui: function() {\n\t\t    $('#qti-navigation button').addClass('disabled');\n\t\t},\n\n\t\tenableGui: function() {\n\t\t    $('#qti-navigation button').removeClass('disabled');\n\t\t},\n\n\t\tformatTime: function(totalSeconds) {\n\t\t    var sec_num = totalSeconds;\n\t\t    var hours   = Math.floor(sec_num / 3600);\n\t\t    var minutes = Math    .floor((sec_num - (hours * 3600)) / 60);\n\t\t    var seconds = sec_num - (hours * 3600) - (minutes * 60);\n\n\t\t    if (hours   < 10) {hours   = \"0\" + hours;}\n\t\t    if (minutes < 10) {minutes = \"0\" + minutes;}\n\t\t    if (seconds < 10) {seconds = \"0\" + seconds;}\n\n\t\t    var time    = hours + ':' + minutes + ':' + seconds;\n\n\t\t    return \"\\u00b1 \" + time;\n\t\t},\n\n\t\tactionCall: function(action) {\n\t\t\tvar self = this;\n\t\t\tthis.beforeTransition(function() {\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: self.assessmentTestContext[action + 'Url'],\n\t\t\t\t\tcache: false,\n\t\t\t\t\tasync: true,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(assessmentTestContext, textStatus, jqXhr) {\n\t\t\t\t\t\tif (assessmentTestContext.state === self.TEST_STATE_CLOSED) {\n\t\t\t\t\t\t\tself.serviceApi.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tself.update(assessmentTestContext);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t    start : function(assessmentTestContext){\n\t        \n\t        $(document).ajaxError(function(event, jqxhr) {\n                if (jqxhr.status == 403) {\n                    iframeNotifier.parent('serviceforbidden');\n                }\n            });\n\t        \n\t    \twindow.onServiceApiReady = function onServiceApiReady(serviceApi) {\n\t            TestRunner.serviceApi = serviceApi;\n\n\t           // If the assessment test session is in CLOSED state,\n\t           // we give the control to the delivery engine by calling\n\t           // finish.\n\t           if (assessmentTestContext.state === TestRunner.TEST_STATE_CLOSED) {\n                   serviceApi.finish();\n\t           }\n\t           else {\n                   TestRunner.update(assessmentTestContext);\n\t           }\n\t        };\n\n\t        TestRunner.beforeTransition();\n\t        TestRunner.assessmentTestContext = assessmentTestContext;\n\n\t        $('#skip, #skip-end').click(function(){\n\t            if (!$(this).hasClass('disabled')) {\n\t                TestRunner.skip();\n\t            }\n\t        });\n\n\t        $('#move-forward, #move-end').click(function(){\n\t            if (!$(this).hasClass('disabled')) {\n\t                TestRunner.moveForward();\n\t            }\n\t        });\n\n\t        $('#move-backward').click(function(){\n\t            if (!$(this).hasClass('disabled')) {\n\t                TestRunner.moveBackward();\n\t            }\n\t        });\n\n\t        $('#comment').click(function(){\n\t            if (!$(this).hasClass('disabled')) {\n\t                TestRunner.comment();\n\t            }\n\t        });\n\n\t        $('#qti-comment-cancel').click(function(){\n\t                TestRunner.closeComment();\n\t        });\n\n\t        $('#qti-comment-send').click(function(){\n\t            TestRunner.storeComment();\n\t        });\n\n\t        $('#qti-comment > textarea').click(function(){\n\t            TestRunner.emptyComment();\n\t        });\n\n\t        $(window).bind('resize', function() {\n\t            TestRunner.adjustFrame();\n\t            $('#qti-test-title, #qti-test-position').badonkatrunc();\n\t        });\n\n\t        $(document).bind('loading', function() {\n\t            iframeNotifier.parent('loading');\n\t        });\n\n\n\t        $(document).bind('unloading', function() {\n                iframeNotifier.parent('unloading');\n\t        });\n\n            $('#qti-progressbar').progressbar();\n\n\t        iframeNotifier.parent('serviceready');\n\t    }\n\t};\n});\n\n"]}